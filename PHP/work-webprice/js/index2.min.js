(function(b){b.fn.extend({autocomplete:function(a,f){var e=typeof a=="string";f=b.extend({},b.Autocompleter.defaults,{url:e?a:null,data:e?null:a,delay:e?b.Autocompleter.defaults.delay:10,max:f&&!f.scroll?10:150,tipText:f&&f.tipText?f.tipText:"",parentContainer:f&&f.parentContainer?f.parentContainer:document.body},f);f.highlight=f.highlight||function(c){return c};f.formatMatch=f.formatMatch||f.formatItem;return this.each(function(){new b.Autocompleter(this,f)})},result:function(a){return this.bind("result",a)},refresh:function(a){return this.bind("refresh",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(J,O){var S={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var T=b(J).attr("autocomplete","off").addClass(O.inputClass);var L;var F="";var I=b.Autocompleter.Cache(O);var Q=0;var A;var a={mouseDownOnSelect:false};var D=b.Autocompleter.Select(O,J,R,a);var y;b.browser.opera&&b(J.form).bind("submit.autocomplete",function(){if(y){y=false;return false}});T.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(c){Q=1;A=c.keyCode;switch(c.keyCode){case S.UP:c.preventDefault();if(D.visible()){D.prev()}else{B(0,true)}break;case S.DOWN:c.preventDefault();if(D.visible()){D.next()}else{B(0,true)}break;case S.PAGEUP:c.preventDefault();if(D.visible()){D.pageUp()}else{B(0,true)}break;case S.PAGEDOWN:c.preventDefault();if(D.visible()){D.pageDown()}else{B(0,true)}break;case O.multiple&&b.trim(O.multipleSeparator)==","&&S.COMMA:case S.TAB:case S.RETURN:if(R()){c.preventDefault();y=true;return false}break;case S.ESC:D.hide();break;default:clearTimeout(L);L=setTimeout(B,O.delay);break}}).focus(function(){if(T.val()==O.tipText){T.val("")}Q++}).blur(function(){}).click(function(){if(Q++>1&&!D.visible()){B(0,true)}T.focus();T.select()}).bind("search",function(){var d=(arguments.length>1)?arguments[1]:null;function c(f,g){var e;if(g&&g.length){for(var h=0;h<g.length;h++){if(g[h].result.toLowerCase()==f.toLowerCase()){e=g[h];break}}}if(typeof d=="function"){d(e)}else{T.trigger("result",e&&[e.data,e.value])}}b.each(N(T.val()),function(e,f){P(f,c,c)})}).bind("flushCache",function(){I.flush()}).bind("setOptions",function(){b.extend(O,arguments[1]);if("data" in arguments[1]){I.populate()}}).bind("unautocomplete",function(){D.unbind();T.unbind();b(J.form).unbind(".autocomplete")}).bind("input",function(){var c=T.val(),d=c.replace(/( |[\s\u3000])/g,"");if(d!==""){clearTimeout(O.timeout);O.timeout=setTimeout(function(){b(O.reset).show()},100)}else{b(O.reset).hide()}B(0,true);T.trigger("refresh")});function R(){var i=D.selected();if(!i){return false}var h=i.result;F=h;if(O.multiple){var d=N(T.val());if(d.length>1){var c=O.multipleSeparator.length;var e=b(J).selection().start;var g,f=0;b.each(d,function(k,j){f+=j.length;if(e<=f){g=k;return false}f+=c});d[g]=h;h=d.join(O.multipleSeparator)}h+=O.multipleSeparator}z();T.trigger("result",[i.data,i.value]);return true}function B(c,d){if(A==S.DEL){D.hide();return}var e=T.val();if(!d&&e==F){return}if(e==O.tipText){return}F=e;e=M(e);if(e.length>=O.minChars){T.addClass(O.loadingClass);if(!O.matchCase){e=e.toLowerCase()}P(e,K,z)}else{H();D.hide()}}function N(c){if(!c){return[""]}if(!O.multiple){return[b.trim(c)]}return b.map(c.split(O.multipleSeparator),function(d){return b.trim(c).length?b.trim(d):null})}function M(e){if(!O.multiple){return e}var c=N(e);if(c.length==1){return c[0]}var d=b(J).selection().start;if(d==e.length){c=N(e)}else{c=N(e.replace(e.substring(d),""))}return c[c.length-1]}function E(d,c){if(O.autoFill&&(M(T.val()).toLowerCase()==d.toLowerCase())&&A!=S.BACKSPACE){T.val(T.val()+c.substring(M(F).length));b(J).selection(F.length,F.length+c.length)}}function C(){clearTimeout(L);L=setTimeout(z,200)}function z(){var c=D.visible();D.hide();clearTimeout(L);H();if(O.mustMatch){T.search(function(e){if(!e){if(O.multiple){var d=N(T.val()).slice(0,-1);T.val(d.join(O.multipleSeparator)+(d.length?O.multipleSeparator:""))}else{T.val("");T.trigger("result",null)}}})}}function K(c,d){if(d&&d.length&&Q){H();D.display(d,c);E(c,d[0].value);D.show()}else{z()}}function P(e,g,f){if(!O.matchCase){e=e.toLowerCase()}var c=I.load(e);if(c&&c.length){g(e,c)}else{if((typeof O.url=="string")&&(O.url.length>0)){var d={timestamp:+new Date()};b.each(O.extraParams,function(i,h){d[i]=typeof h=="function"?h():h});b.ajax({mode:"abort",port:"autocomplete"+J.name,dataType:O.dataType,url:O.url,data:b.extend({q:M(e),limit:O.max},d),success:function(h){var i=O.parse&&O.parse(h)||G(h);I.add(e,i);g(e,i)}})}else{D.emptyList();f(e)}if(c.length==0){D.nosearch(e);D.show()}}}function G(g){var f=[];var c=g.split("\n");for(var e=0;e<c.length;e++){var d=b.trim(c[e]);if(d){d=d.split("|");f[f.length]={data:d,value:d[0],result:O.formatResult&&O.formatResult(d,d[0])||d[0]}}}return f}function H(){T.removeClass(O.loadingClass)}};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",reset:"",timeout:0,minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(a){return a[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(d,a){return d.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:370};b.Autocompleter.Cache=function(n){var k={};var m=0;function i(c,d){if(!n.matchCase){c=c.toLowerCase()}var e=c.indexOf(d);if(n.matchContains=="word"){e=c.toLowerCase().search("\\b"+d.toLowerCase())}if(e==-1){return false}return e==0||n.matchContains}function j(c,d){if(m>n.cacheLength){a()}if(!k[c]){m++}k[c]=d}function l(){if(!n.data){return false}var e={},f=0;if(!n.url){n.cacheLength=1}e[""]=[];for(var c=0,d=n.data.length;c<d;c++){var h=n.data[c];h=(typeof h=="string")?[h]:h;var r=n.formatMatch(h,c+1,n.data.length);if(r===false){continue}var s=r.charAt(0).toLowerCase();if(!e[s]){e[s]=[]}var g={value:r,data:h,result:n.formatResult&&n.formatResult(h)||r};e[s].push(g);if(f++<n.max){e[""].push(g)}}b.each(e,function(p,o){n.cacheLength++;j(p,o)})}setTimeout(l,25);function a(){k={};m=0}return{flush:a,add:j,populate:l,load:function(g){if(!n.cacheLength||!m){return null}if(!n.url&&n.matchContains){var c=[];for(var e in k){if(e.length>0){var f=k[e];b.each(f,function(o,h){if(i(h.value,g)){c.push(h)}})}}return c}else{if(k[g]){return k[g]}else{if(n.matchSubset){for(var d=g.length-1;d>=n.minChars;d--){var f=k[g.substr(0,d)];if(f){var c=[];b.each(f,function(o,h){if(i(h.value,g)){c[c.length]=h}});return c}}}}}return null}}};b.Autocompleter.Select=function(H,C,A,w){var D={ACTIVE:"ac_over"};var B,G=-1,u,z="",t=true,J,a,x;function y(){if(!t){return}if(b("#"+H.resultsClass).length>0){a=b("#"+H.resultsClass).hide();if(a.find("#scroller").length>0){J=a.find("#scroller")}else{J=b('<div id="scroller"/>').appendTo(a).hide().addClass("scroller")}}else{J=b("<div/>").hide().addClass(H.resultsClass).css("position","absolute").appendTo(H.parentContainer)}J.empty();x=b("<ul/>").appendTo(J).mouseover(function(c){if(v(c).nodeName&&v(c).nodeName.toUpperCase()=="LI"){G=b("li",x).removeClass(D.ACTIVE).index(v(c));b(v(c)).addClass(D.ACTIVE)}}).click(function(c){b(v(c)).addClass(D.ACTIVE);A();return false}).mousedown(function(){w.mouseDownOnSelect=true}).mouseup(function(){w.mouseDownOnSelect=false});if(H.width>0){J.css("width",H.width)}t=false}function v(c){var d=c.target;while(d&&d.tagName!="LI"){d=d.parentNode}if(!d){return[]}return d}function E(e){B.slice(G,G+1).removeClass(D.ACTIVE);F(e);var c=B.slice(G,G+1).addClass(D.ACTIVE);if(H.scroll){var d=0;B.slice(0,G).each(function(){d+=this.offsetHeight});if((d+c[0].offsetHeight-x.scrollTop())>x[0].clientHeight){x.scrollTop(d+c[0].offsetHeight-x.innerHeight())}else{if(d<x.scrollTop()){x.scrollTop(d)}}}}function F(c){G+=c;if(G<0){G=B.size()-1}else{if(G>=B.size()){G=0}}}function K(c){return H.max&&H.max<c?H.max:c}function I(){x.empty();var e=K(u.length);for(var d=0;d<e;d++){if(!u[d]){continue}var c=H.formatItem(u[d].data,d+1,e,u[d].value,z);if(c===false){continue}var f=b("<li/>").html(H.highlight(c,z)).addClass(d%2==0?"ac_even":"ac_odd").appendTo(x)[0];b.data(f,"ac_data",u[d])}B=x.find("li");if(H.selectFirst){B.slice(0,1).addClass(D.ACTIVE);G=0}if(b.fn.bgiframe){x.bgiframe()}}return{display:function(c,d){y();u=c;z=d;I()},next:function(){E(1)},prev:function(){E(-1)},pageUp:function(){if(G!=0&&G-8<0){E(-G)}else{E(-8)}},pageDown:function(){if(G!=B.size()-1&&G+8>B.size()){E(B.size()-1-G)}else{E(8)}},hide:function(){J&&J.hide();a&&a.hide();B&&B.removeClass(D.ACTIVE);G=-1},visible:function(){return J&&J.is(":visible")},current:function(){return this.visible()&&(B.filter("."+D.ACTIVE)[0]||H.selectFirst&&B[0])},show:function(){var c=b(C).offset();J.show();a.css({width:typeof H.width=="string"||H.width>0?H.width:b(C).width(),top:H.top,left:H.left,height:H.height>0?H.height-H.top:b(window).height()-H.top}).show();if(H.scroll){x.scrollTop(0);if(b.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var e=0;B.each(function(){e+=this.offsetHeight});var d=e>H.scrollHeight;x.css("height",d?H.scrollHeight:e);if(!d){B.width(x.width()-parseInt(B.css("padding-left"))-parseInt(B.css("padding-right")))}}}},selected:function(){var c=B&&B.filter("."+D.ACTIVE).removeClass(D.ACTIVE);return c&&c.length&&b.data(c[0],"ac_data")},emptyList:function(){x&&x.empty()},unbind:function(){J&&J.remove()},nosearch:function(d){var c=$("<li/>").html("\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u4e0e<strong>"+d+"</strong>\u76f8\u5173\u7684\u7ed3\u679c\u3002").addClass("ac_even").appendTo(x)}}};b.fn.selection=function(j,a){if(j!==undefined){return this.each(function(){if(this.createTextRange){var c=this.createTextRange();if(a===undefined||j==a){c.move("character",j);c.select()}else{c.collapse(true);c.moveStart("character",j);c.moveEnd("character",a);c.select()}}else{if(this.setSelectionRange){this.setSelectionRange(j,a)}else{if(this.selectionStart){this.selectionStart=j;this.selectionEnd=a}}}})}var l=this[0];if(l.createTextRange){var p=document.selection.createRange(),k=l.value,m="<->",o=p.text.length;p.text=m;var n=l.value.indexOf(m);l.value=k;this.selection(n,n+o);return{start:n,end:n+o}}else{if(l.selectionStart!==undefined){return{start:l.selectionStart,end:l.selectionEnd}}}}})(jQuery);(window,window.lib||(window.lib={})),function(d,c){var e={translation:function(g,f,j){var i=$.extend({duration:"0.4s",origin:"0 0"},f||{}),h=g.style;!h.webkitTransitionProperty&&(h.webkitTransitionProperty="-webkit-transform"),h.webkitTransitionDuration!==i.duration&&(h.webkitTransitionDuration=i.duration),h.webkitTransformOrigin!==i.origin&&(h.webkitTransformOrigin=i.origin),"hidden"!==h.webkitBackfaceVisibility&&(h.webkitBackfaceVisibility="hidden"),"preserve-3d"!==h.webkitTransformStyle&&(h.webkitTransformStyle="preserve-3d"),(null!=i.x||null!=i.y)&&(h.webkitTransform="translate("+(i.x?i.x+"px,":"0,")+(i.y?i.y+"px":"0")+")",setTimeout(j,1500*parseFloat(i.duration)))}};c.trans2d=e}(window,window.lib||(window.lib={})),function(e,d,g){var f={height:$(window).height()};d.windowH=f;$("#wrap").css({height:f.height-$("#bar").height()})}(window,window.lib||(window.lib={}));!function(a,b){var myScroll={refreshP:function(){$("#priceInfo").css({height:b.windowH.height-$("#se-bar").height()-$(".banners").height()-$(".product").height()-$(".TabTitle").height()-15});b.myScroll.myPScroll.refresh()}};var priceinfo=function(m,a,b,initTab){einfo.init(m,a,b,initTab)};var sinfo={q_series_json:"",q_proplist_json:"",q_complist_json:"",q_rellist_json:"",q_mproplist_json:"",q_sprops_json:new Array(),q_m_comps_json:new Array(),q_m_props_json:"",q_n_comps_json:new Array(),q_a_props_json:new Array(),q_class_json:new Array(),q_curprod:{},q_comblist_json:[],q_element_json:"",q_element_innermodel:"",q_elenent_ct:new Array(),q_elenented_ct:new Array(),q_ct_id:new Array(),q_seled_attach_json:new Array(),q_sel_attach_json:new Array(),q_supp_discount:{},q_element_price:"",q_seled_attach_count:0,stimeout:5000,sendtimeout:0,ltimeout:1500,elementtimeout:0,q_pclassid:""};var einfo={init:function(innermodel,classid,pclassid,initTab){sinfo.q_series_json="",sinfo.q_proplist_json="",sinfo.q_complist_json="",sinfo.q_rellist_json="",sinfo.q_mproplist_json="",sinfo.q_sprops_json=new Array(),sinfo.q_m_comps_json=new Array(),sinfo.q_m_props_json="",sinfo.q_n_comps_json=new Array(),sinfo.q_a_props_json=new Array(),sinfo.q_class_json=new Array(),sinfo.q_curprod={},sinfo.q_comblist_json=[],sinfo.q_element_json="",sinfo.q_element_innermodel="",sinfo.q_element_price="",sinfo.q_elenent_ct=new Array(),sinfo.q_elenented_ct=new Array(),sinfo.q_ct_id=new Array(),sinfo.q_seled_attach_json=new Array(),sinfo.q_sel_attach_json=new Array(),sinfo.q_supp_discount={},sinfo.q_seled_attach_count=0,sinfo.q_pclassid=pclassid;var mydate=new Date();$.getJSON("../price/getseriesfilezip.php?t="+mydate.getTime()+"&classid="+classid+"&client=msg",function(cdata){if(cdata!=null){$.getJSON("price/classjson.js?t="+cdata.hash,function(data){sinfo.q_class_json=data});JSZipUtils.getBinaryContent("price/param/"+classid+".zip?t="+cdata.hash,function(err,binarydata){if(err){$.getJSON("price/param/"+classid+".js?t="+cdata.hash,function(data){einfo.getJsonData(innermodel,initTab,data)})}else{var zip=new JSZip(binarydata);var zipdata=zip.file(classid+".js").asText();var data=eval("("+zipdata+")");einfo.getJsonData(innermodel,initTab,data)}})}})},getJsonData:function(innermodel,initTab,data){sinfo.q_series_json=data.SERIES_INFO,sinfo.q_proplist_json=data.PROPS_INFO,sinfo.q_complist_json=data.COMPS_INFO,sinfo.q_rellist_json=data.RELS_INFO,sinfo.q_mproplist_json=data.MPROPS_INFO,sinfo.q_comblist_json=data.ATTACH_INFO;if(initTab==0){einfo.showMainContent()}if(sinfo.q_series_json!=null&&sinfo.q_proplist_json.length>0&&sinfo.q_complist_json!=""){einfo.Q_InitData(),einfo.Q_InitQuery(innermodel),$("#result_prodname").empty(),$("#fissuedate").empty(),$("#price_i").html("0"),$("#price_b").html(".00")}},showMainContent:function(){$("#myTab").find("span").first().addClass("active").removeClass("normal").siblings().addClass("normal").removeClass("active"),$("#myTab_Content0").show().siblings().hide()},Q_InitData:function(){$.each(sinfo.q_complist_json,function(d){var c=sinfo.q_complist_json[d];if(c.IsMain==1){sinfo.q_m_comps_json.push(c);$.each(sinfo.q_proplist_json,function(i){var a=sinfo.q_proplist_json[i];if(a.CompId==c.CompId){sinfo.q_a_props_json.push(a)}})}else{sinfo.q_n_comps_json.push(c);$.each(sinfo.q_proplist_json,function(i){var a=sinfo.q_proplist_json[i];if(a.CompId==c.CompId){var b=einfo.Q_H_FindComp(sinfo.q_complist_json,a.CompId);if(b!=null){if(b.CompProps==null){b.CompProps=new Array()}b.CompProps.push(a)}}})}})},Q_InitQuery:function(n){var a;if(sinfo.q_sprops_json!=null){$.each(sinfo.q_sprops_json,function(b){var c=sinfo.q_sprops_json[b];if(c.MPropList==null||c.MPropList.length==0){a=c;return false}})}if(a==null&&sinfo.q_m_props_json!=null){$.each(sinfo.q_m_props_json,function(b){var c=sinfo.q_m_props_json[b];if(c.MPropList==null||c.MPropList.length==0){a=c;return false}})}a=sinfo.q_proplist_json;einfo.ElementSelected_CheckOpt(a,n,0)},ElementSelected_CheckOpt:function(a,n,b){if(n.length>0){var inner=n.split("\u224c");var z="";$.each(sinfo.q_a_props_json,function(c){if(sinfo.q_a_props_json.length>1){if(c>0&&c>b){var d=sinfo.q_a_props_json[c-1];var k=sinfo.q_a_props_json[c];var p=k.PropId+"|";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}var f=sinfo.q_rellist_json[p+z];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var u=k.OptList[i];if(u.OMod==inner[c]){u.IsChk=true}else{u.IsChk=false}var istrue=einfo.CheckSelectOpt(k.OptList,s);if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true}else{u.IsEn=false}}}else{if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true;if(isex){isex=false}}else{u.IsEn=false}}}})}});var o=sinfo.q_a_props_json[0];$.each(o.OptList,function(j){var t=o.OptList[j];if(t.IsChk==true){var x=t.OID;var f=sinfo.q_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var u=k.OptList[i];if(u.OMod==inner[c]){u.IsChk=true}else{u.IsChk=false}var istrue=einfo.CheckSelectOpt(k.OptList,s);if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true}else{u.IsEn=false}}}else{if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true;if(isex){isex=false}}else{u.IsEn=false}}}})}})}else{if(c==0&&b==0){var d=sinfo.q_a_props_json[c];var k=sinfo.q_a_props_json[c+1];var p=k.PropId+"|";var x="";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.OMod==inner[c]){t.IsChk=true;if(x==""){x=t.OID}else{}var f=sinfo.q_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var u=k.OptList[i];if(u.OMod==inner[c]){u.IsChk=true}else{u.IsChk=false}var istrue=einfo.CheckSelectOpt(k.OptList,s);if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true}else{u.IsEn=false}}}else{if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true;if(isex){isex=false}}else{u.IsEn=false}}}})}else{t.IsChk=false}})}}}else{var d=sinfo.q_a_props_json[c];$.each(d.OptList,function(j){var t=d.OptList[j];if(t.OMod==inner[c]){t.IsChk=true}else{t.IsChk=false}})}})}else{var z="";$.each(sinfo.q_a_props_json,function(c){if(sinfo.q_a_props_json.length>1){if(c>0&&c>b){var d=sinfo.q_a_props_json[c-1];var k=sinfo.q_a_props_json[c];var p=k.PropId+"|";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}var f=sinfo.q_rellist_json[p+z];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var u=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true}else{u.IsEn=false;u.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true;if(isex){u.IsChk=true;isex=false;n=n+"\u224c"+u.OMod}else{u.IsChk=false}}else{u.IsEn=false;u.IsChk=false}}}})}});var o=sinfo.q_a_props_json[0];$.each(o.OptList,function(j){var t=o.OptList[j];if(t.IsChk==true){var x=t.OID;var f=sinfo.q_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var u=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true}else{u.IsEn=false;u.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(u.OID.toString(),s)>=0){u.IsEn=true;if(isex){u.IsChk=true;isex=false}else{u.IsChk=false}}else{u.IsEn=false;u.IsChk=false}}}})}})}else{if(c==0&&b==0){var d=sinfo.q_a_props_json[c];var cot=0;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){t.IsChk=false}else{if(cot==0){t.IsChk=true;n=t.OMod}cot=1}})}}}else{var d=sinfo.q_a_props_json[c];var cot=0;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){t.IsChk=false}else{if(cot==0){t.IsChk=true;n=t.OMod}cot=1}})}});n=n+"\u224c"}einfo.Q_Ref_PropPart(sinfo.q_a_props_json,$("#Part_MainProp"));if(sinfo.q_element_json==""){if(sinfo.q_element_price!=""){var priceinfo="";var appendix="";$.each(sinfo.q_element_price.Table,function(d){var c=sinfo.q_element_price.Table[d];if(c.F_InnerModel==n){priceinfo=c.F_Price;if(typeof c.F_ProductAppendix_CustomID!=="undefined"||c.F_ProductAppendix_CustomID!=null){appendix=c.F_ProductAppendix_CustomID.toString()}return false}});if(appendix!=""&&appendix.length>0&&appendix.indexOf("*")>0){var w;var cusids=appendix;var cusidarr=cusids.split(",");if(cusidarr!=null&&cusidarr.length>0){w=new Array();sinfo.q_elenent_ct.length=0;sinfo.q_elenented_ct.length=0;for(var h=0;h<cusidarr.length;h++){if(cusidarr[h].indexOf("*")>0){var comid=sinfo.q_mproplist_json[cusidarr[h].replace("*","")];w.push(comid+"*");sinfo.q_seled_attach_count++;sinfo.q_elenented_ct.push(cusidarr[h])}else{var comid=sinfo.q_mproplist_json[cusidarr[h]];w.push(comid)}sinfo.q_elenent_ct.push(cusidarr[h].replace("*",""))}}$.each(sinfo.q_complist_json,function(d){var c=sinfo.q_complist_json[d];if(c.IsMain==1){return true}if(w!=null&&w.length>0){if($.inArray(c.CompId.toString(),w)>=0){c.IsEnabled=true;c.IsChecked=false;c.IsShow=true}else{var chk=c.CompId.toString()+"*";if($.inArray(chk,w)>=0){c.IsEnabled=false;c.IsChecked=true;c.IsShow=true;einfo.Q_InitCompAttach(c.CompProps,0,c.CompId)}else{c.IsEnabled=false;c.IsChecked=false;c.IsShow=false}}}});if(sinfo.q_complist_json!=null){$.each(sinfo.q_complist_json,function(h){var g=sinfo.q_complist_json[h];if(!g.IsChecked){return true}$.each(sinfo.q_comblist_json,function(l){var k=sinfo.q_comblist_json[l];if(g.CompId==k.CompSet){if($.inArray(k.CtID.toString(),sinfo.q_elenent_ct)>=0){if($.inArray(k.PropOptSet.toString(),sinfo.q_ct_id)>=0){if($.inArray(k.CtID.toString()+"*",sinfo.q_elenented_ct)>=0){priceinfo=parseFloat(priceinfo)+parseFloat(k.Price)}}}}})})}}var c=einfo.SplitThePrice((priceinfo).toFixed(2));if(priceinfo==null){$("#price_i").html("\u672a\u5b9a\u4ef7");$("#price_b").html("")}else{$("#price_i").html(c[0]);$("#price_b").html(c[1])}$("#loading").hide();myScroll.refreshP()}sinfo.q_element_innermodel=n;var mydate=new Date();$.ajax({type:"POST",url:"../price/getelementinfojson.php?t="+mydate.getTime()+"&client=msg",data:"classid="+sinfo.q_series_json.SeriesID+"&innermodel="+encodeURIComponent(n),async:true,dataType:"json",success:function(e){$("#samplelist").html("");if(e!=null){sinfo.q_element_json=e;var dt=einfo.jsonDateParser(sinfo.q_element_json.F_Issue_Date);$("#fissuedate").html(dt.getFullYear()+"-"+(dt.getMonth()+1)+"-"+dt.getDate());var w;var cusids=sinfo.q_element_json.F_ProductAppendix_CustomID.toString();var cusidarr=cusids.split(",");if(cusidarr!=null&&cusidarr.length>0){w=new Array();sinfo.q_elenent_ct.length=0;sinfo.q_elenented_ct.length=0;for(var h=0;h<cusidarr.length;h++){if(cusidarr[h].indexOf("*")>0){var comid=sinfo.q_mproplist_json[cusidarr[h].replace("*","")];w.push(comid+"*");sinfo.q_seled_attach_count++;sinfo.q_elenented_ct.push(cusidarr[h])}else{var comid=sinfo.q_mproplist_json[cusidarr[h]];w.push(comid)}sinfo.q_elenent_ct.push(cusidarr[h].replace("*",""))}}$.each(sinfo.q_complist_json,function(d){var c=sinfo.q_complist_json[d];if(c.IsMain==1){return true}if(w!=null&&w.length>0){if($.inArray(c.CompId.toString(),w)>=0){c.IsEnabled=true;c.IsChecked=false;c.IsShow=true}else{var chk=c.CompId.toString()+"*";if($.inArray(chk,w)>=0){c.IsEnabled=false;c.IsChecked=true;c.IsShow=true;einfo.Q_InitCompAttach(c.CompProps,0,c.CompId)}else{c.IsEnabled=false;c.IsChecked=false;c.IsShow=false}}}});einfo.Q_Ref_CompTPart();$("#q_comp_info").html("");einfo.staticprice(sinfo.q_element_json.F_Product_ID);$.getJSON("../price/getseriespricefilezip.php?t="+mydate.getTime()+"&classid="+sinfo.q_series_json.SeriesID+"&client=msg",function(pdata){if(pdata!=null){JSZipUtils.getBinaryContent("price/param/"+sinfo.q_series_json.SeriesID+"_price.zip?t="+pdata.hash,function(err,binarydata){if(err){$.getJSON("price/param/"+sinfo.q_series_json.SeriesID+"_price.js?t="+pdata.hash,function(data){sinfo.q_element_price=data})}else{var zip=new JSZip(binarydata);var zipdata=zip.file(sinfo.q_series_json.SeriesID+"_price.js").asText();var data=eval("("+zipdata+")");sinfo.q_element_price=data}})}})}$("#loading").hide();myScroll.refreshP()}})}},Q_Q_Product:function(a,b){var z="";$.each(sinfo.q_a_props_json,function(c){if(c<b){var k=sinfo.q_a_props_json[c];$.each(k.OptList,function(j){var t=k.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}}})}});var u="";$.each(sinfo.q_a_props_json,function(c){if(sinfo.q_a_props_json.length>1){if(c>0&&c>b){var d=sinfo.q_a_props_json[c-1];var k=sinfo.q_a_props_json[c];var p=k.PropId+"|";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}var f=sinfo.q_rellist_json[p+z];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}});var o=sinfo.q_a_props_json[0];$.each(o.OptList,function(j){var t=o.OptList[j];if(t.IsChk==true){var x=t.OID;var f=sinfo.q_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}})}else{if(c==0&&b==0){var d=sinfo.q_a_props_json[c];var k=sinfo.q_a_props_json[c+1];var p=k.PropId+"|";var x="";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(x==""){x=t.OID}else{x=x+"+"+t.OID}var f=sinfo.q_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}})}}}var du=sinfo.q_a_props_json[c];$.each(du.OptList,function(j){var tu=du.OptList[j];if(tu.IsChk==true){u=u+tu.OMod+"\u224c"}})});einfo.Q_Ref_PropPart(sinfo.q_a_props_json,$("#Part_MainProp"));if(sinfo.q_element_price!=""){var priceinfo="";var appendix="";$.each(sinfo.q_element_price.Table,function(d){var c=sinfo.q_element_price.Table[d];if(c.F_InnerModel==u){priceinfo=c.F_Price;if(typeof c.F_ProductAppendix_CustomID!=="undefined"||c.F_ProductAppendix_CustomID!=null){appendix=c.F_ProductAppendix_CustomID.toString()}return false}});if(appendix!=""&&appendix.length>0&&appendix.indexOf("*")>0){var w;var cusids=appendix;var cusidarr=cusids.split(",");if(cusidarr!=null&&cusidarr.length>0){w=new Array();sinfo.q_elenent_ct.length=0;sinfo.q_elenented_ct.length=0;for(var h=0;h<cusidarr.length;h++){if(cusidarr[h].indexOf("*")>0){var comid=sinfo.q_mproplist_json[cusidarr[h].replace("*","")];w.push(comid+"*");sinfo.q_seled_attach_count++;sinfo.q_elenented_ct.push(cusidarr[h])}else{var comid=sinfo.q_mproplist_json[cusidarr[h]];w.push(comid)}sinfo.q_elenent_ct.push(cusidarr[h].replace("*",""))}}$.each(sinfo.q_complist_json,function(d){var c=sinfo.q_complist_json[d];if(c.IsMain==1){return true}if(w!=null&&w.length>0){if($.inArray(c.CompId.toString(),w)>=0){c.IsEnabled=true;c.IsChecked=false;c.IsShow=true}else{var chk=c.CompId.toString()+"*";if($.inArray(chk,w)>=0){c.IsEnabled=false;c.IsChecked=true;c.IsShow=true;einfo.Q_InitCompAttach(c.CompProps,0,c.CompId)}else{c.IsEnabled=false;c.IsChecked=false;c.IsShow=false}}}});if(sinfo.q_complist_json!=null){$.each(sinfo.q_complist_json,function(h){var g=sinfo.q_complist_json[h];if(!g.IsChecked){return true}$.each(sinfo.q_comblist_json,function(l){var k=sinfo.q_comblist_json[l];if(g.CompId==k.CompSet){if($.inArray(k.CtID.toString(),sinfo.q_elenent_ct)>=0){if($.inArray(k.PropOptSet.toString(),sinfo.q_ct_id)>=0){if($.inArray(k.CtID.toString()+"*",sinfo.q_elenented_ct)>=0){priceinfo=parseFloat(priceinfo)+parseFloat(k.Price)}}}}})})}}var c=einfo.SplitThePrice((priceinfo).toFixed(2));if(priceinfo==null){$("#price_i").html("\u672a\u5b9a\u4ef7");$("#price_b").html("")}else{$("#price_i").html(c[0]);$("#price_b").html(c[1])}$("#eleloading").hide();myScroll.refreshP()}sinfo.q_element_innermodel=u;sinfo.elementtimeout=window.setTimeout(function(){sinfo.q_element_json="";var mydate=new Date();$.ajax({type:"POST",url:"../price/getelementinfojson.php?t="+mydate.getTime()+"&client=msg",data:"classid="+sinfo.q_series_json.SeriesID+"&innermodel="+encodeURIComponent(u),async:true,dataType:"json",success:function(e){$("#samplelist").html("");if(e!=null){sinfo.q_element_json=e;var dt=einfo.jsonDateParser(sinfo.q_element_json.F_Issue_Date);$("#fissuedate").html(dt.getFullYear()+"-"+(dt.getMonth()+1)+"-"+dt.getDate());var w;var cusids=sinfo.q_element_json.F_ProductAppendix_CustomID.toString();var cusidarr=cusids.split(",");if(cusidarr!=null&&cusidarr.length>0){w=new Array();sinfo.q_elenent_ct.length=0;sinfo.q_elenented_ct.length=0;for(var h=0;h<cusidarr.length;h++){if(cusidarr[h].indexOf("*")>0){var comid=sinfo.q_mproplist_json[cusidarr[h].replace("*","")];w.push(comid+"*");sinfo.q_seled_attach_count++;sinfo.q_elenented_ct.push(cusidarr[h])}else{var comid=sinfo.q_mproplist_json[cusidarr[h]];w.push(comid)}sinfo.q_elenent_ct.push(cusidarr[h].replace("*",""))}}$.each(sinfo.q_complist_json,function(d){var c=sinfo.q_complist_json[d];if(c.IsMain==1){return true}if(w!=null&&w.length>0){if($.inArray(c.CompId.toString(),w)>=0){c.IsEnabled=true;c.IsChecked=false;c.IsShow=true}else{var chk=c.CompId.toString()+"*";if($.inArray(chk,w)>=0){c.IsEnabled=false;c.IsChecked=true;c.IsShow=true;einfo.Q_InitCompAttach(c.CompProps,0,c.CompId)}else{c.IsEnabled=false;c.IsChecked=false;c.IsShow=false}}}});einfo.Q_Ref_CompTPart();$("#q_comp_info").html("");sinfo.sendtimeout=window.setTimeout(function(){$.ajax({type:"POST",url:"../price/getpraisemicmsg.php?t="+mydate.getTime()+"&client=msg",data:"praise=1&optype=1&productid="+sinfo.q_element_json.F_Product_ID,async:true,dataType:"text",success:function(e){window.clearTimeout(sinfo.sendtimeout)}})},sinfo.stimeout)}$("#eleloading").hide();myScroll.refreshP()}})},sinfo.ltimeout)},CheckSelectOpt:function(a,s){var isex=false;$.each(a,function(c){var d=a[c];if(s!=null&&s.length>0){if(d.IsChk==true&&$.inArray(d.OID.toString(),s)>=0){isex=true;return}}else{if(d.IsChk==true){isex=true;return}}});return isex},Q_H_FindComp:function(a,b){var c;$.each(a,function(d){if(a[d].CompId==b){c=a[d];return false}});return c},Q_Ref_CompTPart:function(){var a="Part_CompT";var d=-1;var c="";var b=0;var typeids=new Array();var compids=new Array();$.each(sinfo.q_complist_json,function(g){var e=sinfo.q_complist_json[g];if(e.IsMain!=0||(!e.IsEnabled&&!e.IsChecked)){return true}if($.inArray(e.TypeName,typeids)==-1){c=c+'<div class="ctype_menu"><span class=\'qp_flag ct_flag\'>&nbsp;</span><div class="ctype_title" onclick="">'+e.TypeName+'</div><div id="ctype_submenu_'+e.TypeName+'" class="ctype_submenu">';$.each(sinfo.q_complist_json,function(j){var t=sinfo.q_complist_json[j];if(e.TypeName==t.TypeName&&$.inArray(t.CompId,compids)==-1){compids.push(t.CompId);if(t.IsMain!=0||(!t.IsEnabled&&!t.IsChecked)){return true}var h=" selected ";var f="ed";if(t.IsEnabled){f=""}if(!t.IsChecked){h=""}c=c+'<span name="epcomp_span" id="epcomp_span_'+t.CompId+'" class="chb_comp">';c=c+'<div class="attachChk'+f+h+'" data="'+t.TypeId+","+t.CompId+'" value="'+t.CompId+'"></div>';c=c+'<div class="attachA" data="'+t.CompId+',0,true">'+t.CompName+"</div></span>"}});c=c+"</div></div>"}typeids.push(e.TypeName)});if(c.length>0){$("#"+a).html(c)}else{$("#"+a).html("\u65e0\u9644\u4ef6!")}$("#Part_CompT").find(".attachChk").each(function(b,c){$(c).unbind("click")});var exc=0;$("#Part_CompT").find(".attachChk").each(function(b,c){$(c).click(function(){var mydate=new Date();if(mydate.getTime()-exc>500){exc=mydate.getTime();var idstr=$(this).attr("data");var idarr=idstr.split(",");if($(this).hasClass("selected")){$(this).removeClass("selected");einfo.Q_CheckComp(false,idarr[0],idarr[1])}else{$(this).addClass("selected");einfo.Q_CheckComp(true,idarr[0],idarr[1])}}})});$("#Part_CompT").find(".attachA").each(function(b,c){$(c).unbind("click")});$("#Part_CompT").find(".attachA").each(function(b,c){$(c).click(function(){var idstr=$(this).attr("data");var idarr=idstr.split(",");var isclick=idarr[2]=="true"?true:false;einfo.Q_Ref_CompInfoChange(idarr[0],idarr[1],isclick)})});sinfo.q_curprod=einfo.Q_GetProduct("");sinfo.q_supp_discount={};einfo.Q_Ref_ProdPart(sinfo.q_curprod)},Q_InitCompAttach:function(a_compinfo_json,b,compid){var attarr=new Array();$.each(sinfo.q_comblist_json,function(c){var k=sinfo.q_comblist_json[c];if(k.CompSet==compid&&$.inArray(k.CtID.toString(),sinfo.q_elenent_ct)>=0){attarr.push(k.PropOptSet)}});var att_rellist_json=new Object();for(var j=0;j<attarr.length;j++){var pos=attarr[j].split("-");var p="";for(var i=0;i<pos.length;i++){if(i>0){if(i==1){p=pos[i-1]}else{p=p+"+"+pos[i-1]}}var attrelsid=i+"|"+p;if(att_rellist_json.hasOwnProperty(attrelsid)){if($.inArray(pos[i],att_rellist_json[attrelsid])>=0){}else{att_rellist_json[attrelsid].push(pos[i])}}else{var attrelsarr=new Array(pos[i]);att_rellist_json[attrelsid]=attrelsarr}}}var z="";var u="";$.each(a_compinfo_json,function(c){if(c>0&&c>b){var d=a_compinfo_json[c-1];var k=a_compinfo_json[c];var p=k.PropId+"|";var s;var cot=0;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}var f=att_rellist_json[p+z];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}})}else{if(c==0&&b==0){var d=a_compinfo_json[c];var k=a_compinfo_json[c+1];var dp=d.PropId+"|";var ds;var df=att_rellist_json[dp];if(df!=null&&df.length>0){ds=new Array();for(var h=0;h<df.length;h++){ds.push(df[h])}}var isex=true;$.each(d.OptList,function(j){var n=d.OptList[j];var istrue=einfo.CheckSelectOpt(d.OptList,ds);if(istrue){isex=false;if(ds!=null&&ds.length>0){if($.inArray(n.OID.toString(),ds)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(ds!=null&&ds.length>0){if($.inArray(n.OID.toString(),ds)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}});if(k!=null){var p=k.PropId+"|";var x="";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(x==""){x=t.OID}else{}var f=att_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}})}}}var cu=a_compinfo_json[c];$.each(cu.OptList,function(j){var tu=cu.OptList[j];if(tu.IsChk==true){if(c==0){u=tu.OID}else{u=u+"-"+tu.OID}}})});sinfo.q_ct_id.push(u)},Q_FindCombPrice:function(b,a){var c;$.each(b,function(d){var e=b[d];if(e.PropOptSet==a){c=e;return false}});return c},Q_GetProdComp:function(j,d){var a="";var f=100;var g=0;var up=0;var p=0;$.each(j,function(l){var k=j[l];$.each(k.OptList,function(h){var t=k.OptList[h];if(t.IsChk==true){a=(a=="")?t.OID:a+"-"+t.OID}})});var c="";if(sinfo.q_comblist_json!=""&&sinfo.q_comblist_json){c=einfo.Q_FindCombPrice(sinfo.q_comblist_json,a)}if(c&&c!=""){g=c.Price;p=g;f=c.Discount;up=(g*(f/100)).toFixed(2)}else{g=0;p=g.toFixed(2);up=(g*(f/100)).toFixed(2)}},SplitThePrice:function(c){var b="0";var d=".00";if(c!=0){var e=c.toString();var a=e.indexOf(".");b=(a<=0)?e:e.substring(0,a);d=(a<=0)?".00":e.substring(a,e.length)}var f=new Array();f.push(b);f.push(d);return f},Q_Ref_ProdPart:function(b){$("#result_prodname").html(b.ProdName);var c=einfo.SplitThePrice((b.Total).toFixed(2));if(!b.Pricedflag){$("#price_i").html("\u672a\u5b9a\u4ef7");$("#price_b").html("")}else{if($("#price_i").html()!=c[0]){$("#price_i").html(c[0])}if($("#price_b").html()!=c[1]){$("#price_b").html(c[1])}}var a="";if(b.CombList!=null&&b.CombList.length>0){$.each(b.CombList,function(f){var d=b.CombList[f];var e="";if(d.IsMain==1){e=" (\u672c\u4f53)"}a=a+'<tr><td align="center">'+d.CombName+e+'</td><td align="center">\uffe5'+parseFloat(d.Price).toFixed(2)+"</td></tr>"})}$("#Part_pdetail").html(a)},showSupplierDiscount:function(data,rt,at){var modelval=$("#result_prodname").html();var priceval=$("#price_i").html()+$("#price_b").html();var facname=$("#factory-name").html();var sername=$("#series-name").html();var bodystr="\u5c0a\u656c\u7684dq123\u8ba4\u8bc1\u4f9b\u5e94\u5546\uff0c\u60a8\u597d\uff1a\u5236\u9020\u5546\uff3b"+facname+"\uff3d\uff0c\u578b\u53f7\u89c4\u683c\uff3b"+modelval+"\uff3d\uff0c\u54c1\u540d\uff3b"+sername+"\uff3d\uff0c\u73b0\u8bda\u610f\u91c7\u8d2d\uff0c\u8bf7\u5c3d\u5feb\u7ed9\u4e88\u62a5\u4ef7\u3002\u8c22\u8c22\uff01\uff3b\u7535\u6c14\u5929\u4e0b\u5fae\u4fe1\u5ba2\u6237\u7aef\uff3d";$("#supplist").html("");var s="",v="",l="";$.each(data.Table,function(i){var d=data.Table[i];var t=(parseFloat(rt)*parseFloat(d.F_Discount)+parseFloat(at)*parseFloat(d.F_Discount4Appendix));var ct=einfo.SplitThePrice((t).toFixed(2));var telarr=d.F_Tel.split("   ");var twostr="";if(telarr.length>1){twostr='&nbsp;&nbsp;<a class="telA" data="'+telarr[1].replace("-","")+'">'+telarr[1]+"</a>"}var dt=einfo.jsonDateParser(d.F_Issue_Date);var js=(parseFloat(rt)*(1-parseFloat(d.F_Discount))+parseFloat(at)*(1-parseFloat(d.F_Discount4Appendix))).toFixed(2);var sms='<a class="smsA" data="'+telarr[0].replace("-","")+'"><span class="sms"></span></a>';var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("iphone")>-1||ua.indexOf("ipad")>-1){sms=""}l=$('<div class="cpic_rba"/>').html('<ul><li><span class="suptitle">'+d.F_Supplier_Name+'</span><span class="supprice">\uffe5'+ct[0]+ct[1]+"</span></li><li><span>\u4e3b\u4f53:"+(parseFloat(d.F_Discount)*100).toFixed(2).toString()+"%</span><span>\u9644\u4ef6:"+(parseFloat(d.F_Discount4Appendix)*100).toFixed(2).toString()+"%</span><span>\u8282\u7701:"+js.toString()+"</span></li><li><span>\u8054\u7cfb\u4eba:"+d.F_Contact+'</span><span>\u7535\u8bdd:<a class="telA" data="'+telarr[0].replace("-","")+'">'+telarr[0]+"</a>"+twostr+"</span><span>"+sms+"</span></li><li><span>\u5730\u5740:"+d.F_ADDRESS+"</span><span>\u53d1\u5e03\u65e5\u671f:"+dt.getFullYear()+"-"+(dt.getMonth()+1)+"-"+dt.getDate()+"</span></li></ul>");l.appendTo($("#supplist"))});$("#supplist").find(".telA").each(function(b,c){$(c).unbind("click")});$("#supplist").find(".telA").each(function(b,c){$(c).click(function(){var tel=$(this).attr("data");location.href="tel:"+tel})});$("#supplist").find(".smsA").each(function(b,c){$(c).unbind("click")});$("#supplist").find(".smsA").each(function(b,c){$(c).click(function(){var tel=$(this).attr("data");var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("iphone")>-1||ua.indexOf("ipad")>-1){url="sms:"+tel+";body="+encodeURIComponent(bodystr)}else{url="sms:"+tel+"?body="+bodystr}location.href=url})});myScroll.refreshP()},Q_GetProduct:function(compid){if(compid!=""){var editedid;$.each(sinfo.q_seled_attach_json,function(l){var k=sinfo.q_seled_attach_json[l];if(k.CompSet==compid){editedid=l;return true}});if(editedid!=null){sinfo.q_seled_attach_json.splice(editedid,1)}}if(compid!=""){var editid;$.each(sinfo.q_sel_attach_json,function(l){var k=sinfo.q_sel_attach_json[l];if(k.CompSet==compid){editid=l;return true}});if(editid!=null){sinfo.q_sel_attach_json.splice(editid,1)}}var seled=new Object();if(sinfo.q_complist_json!=null){$.each(sinfo.q_complist_json,function(h){var g=sinfo.q_complist_json[h];if(!g.IsChecked){return true}$.each(sinfo.q_comblist_json,function(l){var k=sinfo.q_comblist_json[l];if(g.CompId==k.CompSet){if($.inArray(k.CtID.toString(),sinfo.q_elenent_ct)>=0){seled[k.CompSet]=k.CompSet;if($.inArray(k.PropOptSet.toString(),sinfo.q_ct_id)>=0){k.IsMain=0;if($.inArray(k.CtID.toString()+"*",sinfo.q_elenented_ct)>=0){sinfo.q_seled_attach_json.push(k)}else{sinfo.q_sel_attach_json.push(k)}}}}})})}var noseled=new Array();$.each(sinfo.q_sel_attach_json,function(l){var k=sinfo.q_sel_attach_json[l];if(!seled.hasOwnProperty(k.CompSet)){noseled.push(l)}});for(var z=0;z<noseled.length;z++){sinfo.q_sel_attach_json.splice(noseled[z],1)}var a=einfo.Q_InitProduct();var f=0;var b="";var pk="";$.each(sinfo.q_a_props_json,function(c){var du=sinfo.q_a_props_json[c];$.each(du.OptList,function(j){var tu=du.OptList[j];if(tu.IsChk==true){if(a.Prodkey==null){a.Prodkey=tu.OID.toString()}else{a.Prodkey=a.Prodkey+"+"+tu.OID}}})});if(sinfo.q_complist_json!=null){a.CombList=new Array();var attarr=sinfo.q_element_json.F_ProductAppendix_CustomID.toString().split("*");var elename=sinfo.q_element_json.F_Model;var namearr=sinfo.q_element_json.F_Model.lastIndexOf("+");for(var z=0;z<attarr.length-1;z++){if(namearr>0){elename=elename.substring(0,namearr);namearr=elename.lastIndexOf("+")}}var rk=einfo.Q_InitCombiantion();rk.CombName=elename;rk.IsMain=1;var productprice=0;if(sinfo.q_element_json.F_Price!=null){productprice=sinfo.q_element_json.F_Price}else{a.Pricedflag=false}rk.Price=productprice;a.CombList.push(rk);$.each(sinfo.q_seled_attach_json,function(l){var k=sinfo.q_seled_attach_json[l];f=parseFloat(f)+parseFloat(k.Price);a.CombList.push(k)});$.each(sinfo.q_sel_attach_json,function(l){var k=sinfo.q_sel_attach_json[l];f=parseFloat(f)+parseFloat(k.Price);b=b+"+"+k.CombName;pk=pk+"+"+k.PropOptSet;a.CombList.push(k)});a.ProdDetailName=sinfo.q_element_json.F_Model;a.ProdName=sinfo.q_element_json.F_Model+b;a.FactName=sinfo.q_series_json.FactName;a.Unit=sinfo.q_element_json.F_Unit;a.CataName=sinfo.q_class_json[sinfo.q_element_json.F_Category_ID];a.Prodkey=a.Prodkey+"+"+pk+sinfo.q_series_json.SeriesID;a.Total=parseFloat(f)+parseFloat(productprice);a.Price=parseFloat(f)+parseFloat(productprice);a.PriceBeforeDisc=productprice}return a},Q_CheckComp:function(check_box,compTId,compId){var curcomp=einfo.Q_H_FindComp(sinfo.q_complist_json,compId);if(typeof curcomp==="undefined"||curcomp==null){return""}curcomp.IsChecked=check_box;einfo.Q_Ref_CompInfo(compId,0,check_box)},Q_Ref_CompInfo:function(c,d,e){var a=einfo.Q_H_FindComp(sinfo.q_complist_json,c);if(typeof a==="undefined"||a==null){return""}sinfo.q_ct_id.length=0;einfo.Q_InitCompAttach(a.CompProps,d,c);sinfo.q_curprod=einfo.Q_GetProduct("");einfo.Q_Ref_ProdPart(sinfo.q_curprod);var attachname=einfo.Q_Attach_CombName(a.CompProps);einfo.Q_GetProdComp(a.CompProps);$("#q_comp_info").html("");if(e){var b="";b+='<div id="q_comp_props">';b+=einfo.Q_Get_CompPropPart(c,a.CompProps,false,attachname);b+="</div>";$("#q_comp_info").html(b);myScroll.refreshP();$("#q_comp_props").find(".attachClk").each(function(b,c){$(c).unbind("click")});$("#q_comp_props").find(".attachClk").each(function(b,c){$(c).click(function(){var idstr=$(this).attr("data");var idarr=idstr.split(",");einfo.Q_S_CompProp(idarr[0],idarr[1],idarr[2]);myScroll.refreshP()})})}},Q_Ref_CompInfoChange:function(c,d,e){var a=einfo.Q_H_FindComp(sinfo.q_complist_json,c);if(typeof a==="undefined"||a==null){return""}sinfo.q_ct_id.length=0;einfo.Q_InitCompAttach(a.CompProps,d,c);sinfo.q_curprod=einfo.Q_GetProduct(c);einfo.Q_Ref_ProdPart(sinfo.q_curprod);var attachname=einfo.Q_Attach_CombName(a.CompProps);einfo.Q_GetProdComp(a.CompProps);$("#q_comp_info").html("");if(e){var b="";b+='<div id="q_comp_props">';b+=einfo.Q_Get_CompPropPart(c,a.CompProps,false,attachname);b+="</div>";$("#q_comp_info").html(b);myScroll.refreshP();$("#q_comp_props").find(".attachClk").each(function(b,c){$(c).unbind("click")});$("#q_comp_props").find(".attachClk").each(function(b,c){$(c).click(function(){var idstr=$(this).attr("data");var idarr=idstr.split(",");einfo.Q_S_CompProp(idarr[0],idarr[1],idarr[2]);myScroll.refreshP()})})}},Q_Attach_CombName:function(b){var combname="";var a="";$.each(b,function(l){var k=b[l];$.each(k.OptList,function(h){var t=k.OptList[h];if(t.IsChk==true){a=(a=="")?t.OID:a+"-"+t.OID}})});var c=einfo.Q_FindCombPrice(sinfo.q_comblist_json,a);return c.CombName},Q_Get_CompPropPart:function(c,e,d,attname){var a='<div class="prop_part pro_part_name"><h1>'+attname+"</h1></div>";if(e!=null&&e.length>0){var b=0;$.each(e,function(j){var f=e[j];if(f.Jlbs==1||f.Jlbs==3||f.IsShow==0){return true}if(!d&&f.Jlbs==2){return true}var g=false;var h;if(f.OptList!=null&&f.OptList.length>0){h=einfo.Q_H_FindPropOptList(f.OptList,true);if(h.length>0){g=true}}if(g){b++;var l=(b%2==0)?"prop_part_bg2":"prop_part_bg1";var k='<div id="q_prop_'+f.PropId+'" class="prop_part '+l+'"><div class="prop_title"><span class="qp_flag cp_flag">&nbsp;</span><label>'+f.PropName+"</label></div><div class='prop_list'>";$.each(h,function(n){var o=h[n];var m=(o.IsChk)?"opt_s opt_s_ch":"opt_s opt_s_nch attachClk";if(d){k=k+'<span id="q_opt_'+o.OID+'" class="opt_s '+m+'">'+o.OName+"</span>"}else{k=k+'<span id="q_opt_'+o.OID+'" class="opt_s '+m+'" data="'+c+","+f.PropId+","+o.OID+'">'+o.OName+"</span>"}});k=k+"</div></div>";a+=k}})}return a},Q_H_FindPropById:function(b,a){var c;$.each(b,function(d){if(b[d].PropId==a){c=b[d];return false}});return c},Q_SelectedCompAttach:function(a_compinfo_json,b,compid){var attarr=new Array();$.each(sinfo.q_comblist_json,function(c){var k=sinfo.q_comblist_json[c];if(k.CompSet==compid&&$.inArray(k.CtID.toString(),sinfo.q_elenent_ct)>=0){attarr.push(k.PropOptSet)}});var att_rellist_json=new Object();for(var j=0;j<attarr.length;j++){var pos=attarr[j].split("-");var p="";for(var i=0;i<pos.length;i++){if(i>0){if(i==1){p=pos[i-1]}else{p=p+"+"+pos[i-1]}}var attrelsid=i+"|"+p;if(att_rellist_json.hasOwnProperty(attrelsid)){if($.inArray(pos[i],att_rellist_json[attrelsid])>=0){}else{att_rellist_json[attrelsid].push(pos[i])}}else{var attrelsarr=new Array(pos[i]);att_rellist_json[attrelsid]=attrelsarr}}}var z="";$.each(a_compinfo_json,function(c){if(c<b){var k=a_compinfo_json[c];$.each(k.OptList,function(j){var t=k.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}}})}});var u="";$.each(a_compinfo_json,function(c){if(c>0&&c>b){var d=a_compinfo_json[c-1];var k=a_compinfo_json[c];var p=k.PropId+"|";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(z==""){z=t.OID}else{z=z+"+"+t.OID}var f=att_rellist_json[p+z];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}})}else{if(c==0&&b==0){var d=a_compinfo_json[c];var k=a_compinfo_json[c+1];var dp=d.PropId+"|";var ds;var df=att_rellist_json[dp];if(df!=null&&df.length>0){ds=new Array();for(var h=0;h<df.length;h++){ds.push(df[h])}}var isex=true;$.each(d.OptList,function(j){var n=d.OptList[j];var istrue=einfo.CheckSelectOpt(d.OptList,ds);if(istrue){isex=false;if(ds!=null&&ds.length>0){if($.inArray(n.OID.toString(),ds)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(ds!=null&&ds.length>0){if($.inArray(n.OID.toString(),ds)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}});if(k!=null){var p=k.PropId+"|";var x="";var s;$.each(d.OptList,function(j){var t=d.OptList[j];if(t.IsChk==true){if(x==""){x=t.OID}else{x=x+"+"+t.OID}var f=att_rellist_json[p+x];if(f!=null&&f.length>0){s=new Array();for(var h=0;h<f.length;h++){s.push(f[h])}}var isex=true;$.each(k.OptList,function(i){var istrue=einfo.CheckSelectOpt(k.OptList,s);var n=k.OptList[i];if(istrue){isex=false;if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true}else{n.IsEn=false;n.IsChk=false}}}else{if(s!=null&&s.length>0){if($.inArray(n.OID.toString(),s)>=0){n.IsEn=true;if(isex){n.IsChk=true;isex=false}else{n.IsChk=false}}else{n.IsEn=false;n.IsChk=false}}}})}})}}}var cu=a_compinfo_json[c];$.each(cu.OptList,function(j){var tu=cu.OptList[j];if(tu.IsChk==true){if(c==0){u=tu.OID}else{u=u+"-"+tu.OID}}})});sinfo.q_ct_id.push(u)},Q_S_CompProp:function(compId,propId,optId){var curcomp=einfo.Q_H_FindComp(sinfo.q_complist_json,compId);if(curcomp!=null){var curprop=einfo.Q_H_FindPropById(curcomp.CompProps,propId);einfo.Q_ST_CheckOpt(curprop,optId);einfo.Q_Selected_CompInfo(compId,propId)}},Q_Selected_CompInfo:function(c,d){var b="";$("#q_comp_info").html("");var a=einfo.Q_H_FindComp(sinfo.q_complist_json,c);if(typeof a==="undefined"||a==null){return""}sinfo.q_ct_id.length=0;einfo.Q_SelectedCompAttach(a.CompProps,d,c);sinfo.q_curprod=einfo.Q_GetProduct(c);einfo.Q_Ref_ProdPart(sinfo.q_curprod);var attachname=einfo.Q_Attach_CombName(a.CompProps);einfo.Q_GetProdComp(a.CompProps);b+='<div id="q_comp_props">';b+=einfo.Q_Get_CompPropPart(c,a.CompProps,false,attachname);b+="</div>";$("#q_comp_info").html(b);myScroll.refreshP();$("#q_comp_props").find(".attachClk").each(function(b,c){$(c).unbind("click")});$("#q_comp_props").find(".attachClk").each(function(b,c){$(c).click(function(){var idstr=$(this).attr("data");var idarr=idstr.split(",");einfo.Q_S_CompProp(idarr[0],idarr[1],idarr[2]);myScroll.refreshP()})})},Q_Ref_PropPart:function(c,a){a.html("");if(c!=null&&c.length>0){var b=0;$.each(c,function(g){var d=c[g];if(d.Jlbs==0&&d.IsShow==1){var e=false;var f;if(d.OptList!=null&&d.OptList.length>0){f=einfo.Q_H_FindPropOptList(d.OptList,true);if(f.length>0){e=true}}if(e){b++;var j=(b%2==0)?"prop_part_bg2":"prop_part_bg1";var h='<div id="q_prop_'+d.PropId+'" class="prop_part '+j+'"><div class="prop_title"><span class="qp_flag cp_flag">&nbsp;</span><label>'+d.PropName+'</label></div><div class="prop_list">';$.each(f,function(l){var m=f[l];var k=(m.IsChk)?"opt_s opt_s_ch":"opt_s opt_s_nch bodyClk";h=h+'<span id="q_opt_'+m.OID+'" class="opt_s '+k+'" data="'+m.OID+","+m.IsChk+","+g+'">'+m.OName+"</span>"});h=h+"</div></div>";a.append(h)}}});$("#Part_MainProp").find(".bodyClk").each(function(b,c){$(c).unbind("click")});$("#Part_MainProp").find(".bodyClk").each(function(b,c){$(c).click(function(){$("#eleloading").show();var idstr=$(this).attr("data");var idarr=idstr.split(",");var isclick=idarr[1]=="false"?false:true;einfo.Q_S_PropMain(idarr[0],isclick,idarr[2])})})}},Q_S_PropMain:function(optId,isch,propIndex){if(isch){return}window.clearTimeout(sinfo.elementtimeout);window.clearTimeout(sinfo.sendtimeout);sinfo.q_seled_attach_json.length=0;sinfo.q_sel_attach_json.length=0;sinfo.q_ct_id.length=0;var curprop=sinfo.q_proplist_json[propIndex];einfo.Q_ST_CheckOpt(curprop,optId);einfo.Q_Q_Product(curprop,propIndex)},Q_ST_CheckOpt:function(a,b){$.each(a.OptList,function(c){var d=a.OptList[c];if(d.OID==b){d.IsChk=true}else{d.IsChk=false}})},Q_H_FindPropOptList:function(b,a){var c=0;var d=new Array();$.each(b,function(e){if(a!=null&&b[e].IsEn==a){c++;d.push(b[e])}});return d},Q_InitProduct:function(){return eval('({"SeriesID":0,"ProdName":null,"ProdDetailName":null,"CombList":null,"Price":0,"Total":0,"PriceBeforeDisc":0,"Discount":100,"Prodkey":null,"Prodcount":0,"ErpId":null,"Pricedflag":true,"FactName":null,"Unit":null,"CataName":null})')},Q_InitCombiantion:function(){return eval('({"CombID":0,"CombName":null,"CompSet":null,"CtID":null,"Discount":100,"IsMain":0,"Price":0,"PropOptSet":null})')},jsonDateParser:function(value){if(typeof value==="string"){var a=(/^\/Date\((\d+)(([\+\-])(\d\d)(\d\d))?\)/gi).exec(value);if(a){return new Date(parseInt(a[1]))}}return value},getParentClassId:function(factoryid,classid){var pclassid="";var mydate=new Date();$.ajax({type:"GET",url:"price/"+factoryid+".js?t="+mydate.getTime(),timeout:50000,dataType:"json",async:false,beforeSend:function(){},success:function(mNodes){var i,l,cid="cid",pcid="pcid";if(!mNodes){return pclassid}if($.isArray(mNodes)){for(i=0,l=mNodes.length;i<l;i++){if(mNodes[i][cid]==classid){pclassid=mNodes[i][pcid];return}}return pclassid}else{return pclassid}},complete:function(){},error:function(a){}});return pclassid},get_Samplefile:function(factoryid,preclassid,classid,innermode){$("#samplelist").html('<tr><td colspan="2" align="center">\u6b63\u5728\u52a0\u8f7d\u4e2d...</td></tr>');if(preclassid.length==0){preclassid=einfo.getParentClassId(factoryid,classid)}var mydate=new Date();$.ajax({type:"GET",url:"../price/getsamplefile.php?t="+mydate.getTime()+"&client=msg",data:"factoryid="+factoryid+"&preclassid="+preclassid+"&classid="+classid+"&innermode="+encodeURIComponent(innermode),timeout:50000,dataType:"json",success:function(e){$("#samplelist").html("");if(e!=""&&e!=null){var slist="";$.each(e,function(i){slist+='<tr><td align="center"><a class="download" data="'+e[i].url+e[i].filename+e[i].option+'"><span class="downioc">'+e[i].filename+'</span></a></td><td align="center">'+e[i].size+"</td></tr>"});$("#samplelist").html(slist);$("#samplelist").find(".download").each(function(b,c){$(c).unbind("click")});$("#samplelist").find(".download").each(function(b,c){$(c).click(function(){var url=$(this).attr("data");var ua=navigator.userAgent.toLowerCase();if(/micromessenger/.test(ua)){location.href="download.php?url="+encodeURIComponent(url)}else{if(ua.match(/uc|ucbrowser|ucweb/i)||ua.match(/baidu|baidubrowser/i)||ua.match(/360|360browser/i)||ua.match(/opr|opera/i)||ua.match(/firefox\/([\d.]+)/)||ua.match(/micromessenger/i)||ua.match(/chrome\/([\d.]+)/)||ua.match(/safari\/([\d.]+)/)){location.href=url}else{if(ua.match(/qq|mqqbrowser/i)){location.href=url}else{location.href=url}}}})});$(".action_panel_close").unbind("click");$(".action_panel_close").click(function(){$(".action_panels").hide()});$(".copy_share_tip").unbind("click");$(".copy_share_tip").click(function(){});myScroll.refreshP()}else{$("#samplelist").html('<tr><td colspan="2" align="center">\u6682\u65e0\u6837\u672c\uff01</td></tr>')}}})},staticprice:function(pdtid){var mydate=new Date();$.ajax({type:"POST",url:"../price/getpraisemicmsg.php?t="+mydate.getTime()+"&client=msg",data:"praise=1&optype=1&productid="+pdtid,async:true,dataType:"text",success:function(e){}})}};b.ShowPrice=priceinfo;var Samplefile=function(factoryid,preclassid,classid,innermode){einfo.get_Samplefile(factoryid,preclassid,classid,innermode)};b.getSamplefile=Samplefile;var Supplierlist=function(data,rt,at){einfo.showSupplierDiscount(data,rt,at)};b.getSupplier=Supplierlist;b.getSinfo=sinfo}(window,window.lib||(window.lib={}));!function(j,i){var p=j.Zepto||j.$,o=function(){var b="WebkitTransform" in document.documentElement.style?!0:!1;return b},n=function(){var f,e=!1,h=document.createElement("div"),f=["&#173;",'<style id="smodernizr">',"@media (transform-3d),(transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}","</style>"].join(""),g=document.documentElement.style;return h.id="modernizr",h.innerHTML+=f,document.body.appendChild(h),"WebkitPerspective" in g&&"webkitPerspective" in g&&(e=9===h.offsetLeft&&3===h.offsetHeight),h.parentNode.removeChild(h),e},m=n?"translate3d(":"translate(",l=n?",0)":")",k=function(d,c){return d?(c?c.container=d:c="string"==typeof d?{container:d}:d,p.extend(this,{container:".slider",wrap:null,panel:null,trigger:null,activeTriggerCls:"sel",hasTrigger:!1,steps:0,left:0,visible:1,margin:0,curIndex:0,duration:300,loop:!1,play:!1,interval:5000,useTransform:n?!0:!1,lazy:".lazyimg",lazyIndex:1,callback:null,prev:null,next:null,activePnCls:"none"},c),this.findEl()&&this.init()&&this.increaseEvent(),void 0):null};p.extend(k.prototype,{reset:function(b){p.extend(this,b||{}),this.init()},findEl:function(){var b=this.container=p(this.container);return b.length?(this.wrap=this.wrap&&b.find(this.wrap)||b.children().first(),this.wrap.length?(this.panel=this.panel&&b.find(this.panel)||this.wrap.children().first(),this.panel.length?(this.panels=this.panel.children(),this.panels.length?(this.trigger=this.trigger&&b.find(this.trigger),this.prev=this.prev&&b.find(this.prev),this.next=this.next&&b.find(this.next),this):(this.container.hide(),null)):null):null):null},init:function(){var D=this.wrap,C=this.panel,B=this.panels,A=this.trigger,z=this.len=B.length,y=this.margin,x=0,w=this.visible,v=this.useTransform=o?this.useTransform:!1;this.steps=this.steps||D.width(),B.each(function(f,c){x+=c.offsetWidth}),y&&"number"==typeof y&&(x+=(z-1)*y,this.steps+=y),w>1&&(this.loop=!1);var u=this.left;u-=this.curIndex*this.steps,this.setCoord(C,u),v&&(n&&D.css({transform:"translateZ(0)"}),C.css({"backface-visibility":"hidden"}));var t=this._pages=Math.ceil(z/w);if(this._minpage=0,this._maxpage=this._pages-1,this.loadImg(),this.updateArrow(),1>=t){return this.getImg(B[0]),A&&A.hide(),null}if(this.loop){C.append(B[0].cloneNode(!0));var s=B[z-1].cloneNode(!0);C.append(s),this.getImg(s),s.style.cssText+="position:relative;left:"+-this.steps*(z+2)+"px;",x+=B[0].offsetWidth,x+=B[z-1].offsetWidth}if(C.css("width",x),A&&A.length){var r="",e=A.children();if(!e.length){for(var d=0;t>d;d++){r+="<span"+(d==this.curIndex?" class="+this.activeTriggerCls:"")+"></span>"}A.html(r)}this.triggers=A.children(),this.triggerSel=this.triggers[this.curIndex]}else{this.hasTrigger=!1}return this},increaseEvent:function(){var g=this,c=g.wrap[0],r=g.prev,q=g.next,h=g.triggers;c.addEventListener&&(c.addEventListener("touchstart",g,!1),c.addEventListener("touchmove",g,!1),c.addEventListener("touchend",g,!1),c.addEventListener("webkitTransitionEnd",g,!1),c.addEventListener("msTransitionEnd",g,!1),c.addEventListener("oTransitionEnd",g,!1),c.addEventListener("transitionend",g,!1)),g.play&&g.begin(),r&&r.length&&r.on("click",function(a){g.backward.call(g,a)}),q&&q.length&&q.on("click",function(a){g.forward.call(g,a)}),g.hasTrigger&&h&&h.each(function(a,e){p(e).on("click",function(){g.slideTo(a)})})},handleEvent:function(b){switch(b.type){case"touchstart":this.start(b);break;case"touchmove":this.move(b);break;case"touchend":case"touchcancel":this.end(b);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.transitionEnd(b)}},loadImg:function(r){r=r||0,r<this._minpage?r=this._maxpage:r>this._maxpage&&(r=this._minpage);var q=this.visible,x=this.lazyIndex-1,w=x+r;if(!(w>this._maxpage)){w+=1;var v=(r&&x+r||r)*q,u=w*q,t=this.panels;u=Math.min(t.length,u);for(var s=v;u>s;s++){this.getImg(t[s])}}},getImg:function(f){if(f&&(f=p(f),!f.attr("l"))){var c=this,h=c.lazy,g="img"+h;h=h.replace(/^\.|#/g,""),f.find(g).each(function(q,d){var r=p(d);src=r.attr("dataimg"),src&&r.attr("src",src).removeAttr("dataimg").removeClass(h)}),f.attr("l","1")}},start:function(d){var c=d.touches[0];this._movestart=void 0,this._disX=0,this._coord={x:c.pageX,y:c.pageY}},move:function(g){if(!(g.touches.length>1||g.scale&&1!==g.scale)){var f,r=g.touches[0],q=this._disX=r.pageX-this._coord.x,h=this.left;"undefined"==typeof this._movestart&&(this._movestart=!!(this._movestart||Math.abs(q)<Math.abs(r.pageY-this._coord.y))),this._movestart||(g.preventDefault(),this.stop(),this.loop||(q/=!this.curIndex&&q>0||this.curIndex==this._maxpage&&0>q?Math.abs(q)/this.steps+1:1),f=h-this.curIndex*this.steps+q,this.setCoord(this.panel,f),this._disX=q)}},end:function(d){if(!this._movestart){var c=this._disX;-10>c?(d.preventDefault(),this.forward()):c>10&&(d.preventDefault(),this.backward()),c=null}},backward:function(e){e&&e.preventDefault&&e.preventDefault();var d=this.curIndex,f=this._minpage;d-=1,f>d&&(d=this.loop?f-1:f),this.slideTo(d),this.callback&&this.callback(Math.max(d,f),-1)},forward:function(e){e&&e.preventDefault&&e.preventDefault();var d=this.curIndex,f=this._maxpage;d+=1,d>f&&(d=this.loop?f+1:f),this.slideTo(d),this.callback&&this.callback(Math.min(d,f),1)},setCoord:function(d,c){this.useTransform&&d.css("transform",m+c+"px,0"+l)||d.css("left",c)},slideTo:function(g,f){g=g||0,this.curIndex=g;var r=this.panel,q=r[0].style,h=this.left-g*this.steps;q.webkitTransitionDuration=q.MozTransitionDuration=q.msTransitionDuration=q.OTransitionDuration=q.transitionDuration=(f||this.duration)+"ms",this.setCoord(r,h),this.loadImg(g)},transitionEnd:function(){var f=this.panel,e=f[0].style,h=this.loop,g=this.curIndex;h&&(g>this._maxpage?this.curIndex=0:g<this._minpage&&(this.curIndex=this._maxpage),this.setCoord(f,this.left-this.curIndex*this.steps)),h||g!=this._maxpage?this.begin():(this.stop(),this.play=!1),this.update(),this.updateArrow(),e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=0},update:function(){var e=this.triggers,d=this.activeTriggerCls,f=this.curIndex;e&&e[f]&&(this.triggerSel&&(this.triggerSel.className=""),e[f].className=d,this.triggerSel=e[f])},updateArrow:function(){var f=this.prev,e=this.next;if(f&&f.length&&e&&e.length&&!this.loop){var h=this.curIndex,g=this.activePnCls;0>=h&&f.addClass(g)||f.removeClass(g),h>=this._maxpage&&e.addClass(g)||e.removeClass(g)}},begin:function(){var b=this;b.play&&!b._playTimer&&(b.stop(),b._playTimer=setInterval(function(){b.forward()},b.interval))},stop:function(){var b=this;b.play&&b._playTimer&&(clearInterval(b._playTimer),b._playTimer=null)},destroy:function(){var g=this,c=g.wrap[0],r=g.prev,q=g.next,h=g.triggers;c.removeEventListener&&(c.removeEventListener("touchstart",g,!1),c.removeEventListener("touchmove",g,!1),c.removeEventListener("touchend",g,!1),c.removeEventListener("webkitTransitionEnd",g,!1),c.removeEventListener("msTransitionEnd",g,!1),c.removeEventListener("oTransitionEnd",g,!1),c.removeEventListener("transitionend",g,!1)),r&&r.length&&r.off("click"),q&&q.length&&q.off("click"),g.hasTrigger&&h&&h.each(function(e,d){p(d).off("click")})},attachTo:function(d,c){return d=p(d),d.each(function(b,e){e.getAttribute("l")||(e.setAttribute("l",!0),k.cache.push(new k(e,c)))})}}),k.cache=[],k.destroy=function(){var e=k.cache,d=e.length;if(!(1>d)){for(var f=0;d>f;f++){e[f].destroy()}k.cache=[]}},i.Slider=k}(window,window.lib||(window.lib={})),function(f,e,k){var i={layout:function(b){var d="";return'<div id="first-view"><div class="sliderwrap"><ul>'+this.firstView(b)+'</ul></div><div class="indicator">'+this.indicator(b)+"</div></div>"},firstView:function(l){var m=$(window).width();var n=m/2.84;var g="";if(l&&l.items&&l.items.length){for(var p=0;p<l.items.length;p++){var o=l.items[p];g+='<li index="'+p+'" l="1"><a href="'+o.targetUrl+'"><img class="" src="'+o.imageUrl+'" width="'+m+'px" height="'+n+'px"></a></li>'}}return g},indicator:function(l){var g="";if(l&&l.items&&l.items.length){for(var n=0;n<l.items.length;n++){var m=l.items[n];n===0?g+='<span class="cur"></span>':g+='<span class=""></span>'}}return g},sliderAuto:function(){new e.Slider($("#first-view"),{trigger:".indicator",activeTriggerCls:"cur",play:!0,loop:!0})}};var h={refreshF:function(){e.myScroll.myFScroll.refresh()}};var j={type:"GET",url:"getdata.php",timeout:50000,dataType:"json",success:function(b){$("#guide").html(i.layout(b));i.sliderAuto();h.refreshF()},error:function(b){$("#guide").html("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5")}};$.ajax(j)}(window,window.lib||(window.lib={})),function(v,u){var q={getSinfo:function(){return u.getSinfo}};var h={getSamplefile:function(d,a,b,g){u.getSamplefile(d,a,b,g)},getSupplier:function(d,b,a){u.getSupplier(d,b,a)}};var w={contShow:$("#elementTop"),swipeTabCont:$("#elementTopCont"),priceInfo:$("#priceInfo"),wrap:$("#wrap"),leftCate:$("#selection"),leftmask:$(".selmask"),bodyH:u.windowH.height,init:function(b,a){$("#se-goback").off("click");$("#se-goback").on("click",function(){w.hideLeft(),$(".action_panels").hide()});$(".banners").html("<span id='factory-name'>"+b+"</span> &gt;&gt; <span id='series-name'>"+a+"</span>");$("#myTab").find("span").each(function(d,g){$(g).click(function(){$(this).addClass("active").removeClass("normal").siblings().addClass("normal").removeClass("active"),$("#myTab_Content"+d).show().siblings().hide();if(d==4){if($("#samplelist").html().length==0){h.getSamplefile(q.getSinfo().q_series_json.FactoryID,q.getSinfo().q_pclassid,q.getSinfo().q_element_json.F_Class_ID,q.getSinfo().q_element_innermodel)}}else{if(d==3){var z=0;var y=0;if(q.getSinfo().q_curprod.CombList!=null&&q.getSinfo().q_curprod.CombList.length>0){$.each(q.getSinfo().q_curprod.CombList,function(B){var C=q.getSinfo().q_curprod.CombList[B];if(C.IsMain==1){z=parseFloat(z)+parseFloat(C.Price)}else{y=parseFloat(y)+parseFloat(C.Price)}})}if($.isEmptyObject(q.getSinfo().q_supp_discount)){$("#supplist").html('<div style="text-align:center;">\u6b63\u5728\u52a0\u8f7d\u4e2d...</div>');var A=new Date();$.getJSON("../price/getsupplierlist.php?t="+A.getTime()+"&classid="+q.getSinfo().q_element_json.F_Class_ID+"&client=msg",function(B){q.getSinfo().q_supp_discount=B;h.getSupplier(q.getSinfo().q_supp_discount,z,y)})}else{h.getSupplier(q.getSinfo().q_supp_discount,z,y)}}}e.refreshP()})})},showLeft:function(b){var a=this;a.leftCate.show(),a.contShow.css({"backface-visibility":"hidden",prespective:"1000","transform-style":"preserve-3d",width:$(window).width()}),a.leftCate.css({height:a.bodyH,width:"100%",top:"0px"}),a.priceInfo.css({height:u.windowH.height-$("#se-bar").height()-$(".banners").height()-$(".product").height()-$(".TabTitle").height()-15}),a.leftmask.css({top:"0px"}),u.trans2d.translation(a.contShow[0],{x:0},function(){a.leftmask.css({height:a.leftCate.height()})})},hideLeft:function(){var a=this;u.trans2d.translation(a.leftCate[0],{x:$(window).width(),duration:"0.4s"},function(){a.leftmask.hide(),a.leftCate.hide(),a.leftCate.attr("style",""),a.contShow.attr("style","")})},refresh:function(){var d=this,a=null;a=setTimeout(function(){var g=d.swipeTabCont.height()+70;d.wrap.css({"min-height":g}),d.leftCate.css({"min-height":g}),d.leftmask.css({height:d.wrap.height()})},500)}};u.ShowEle=w;var x={ShowElement:function(a,b,d,g){new u.ShowPrice(a,b,d,g)}};var k={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}};var l={treeId:"mTree",treeObj:$("#mTree"),view:{addDiyDom:null,autoCancelSelected:true,dblClickExpand:true,expandSpeed:"fast",fontCss:{},nameIsHTML:false,selectedMulti:true,showIcon:true,showLine:false,showTitle:false,txtSelectedEnable:false},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:true,idKey:"id",pIdKey:"pId",rootPId:null}}};var i={};i[l.data.key.children]=[];i.expandTriggerFlag=false;i.curSelectedList=[];i.noSelection=true;i.createdNodes=[];i.zId=0;i._ver=(new Date()).getTime();var n=[];n.mTree=i;var j=true;var r={apply:function(b,d,a){if((typeof b)=="function"){return b.apply(zt,d?d:[])}return a},eqs:function(b,a){return b.toLowerCase()===a.toLowerCase()}};var c={setRoot:function(b,a){n[b.treeId]=a},getRoot:function(a){return a?n[a.treeId]:null},transformTomTreeFormat:function(C,g){var y,d,A=C.data.simpleData.idKey,z=C.data.simpleData.pIdKey,b=C.data.key.children;if(!A||A==""||!g){return[]}if($.isArray(g)){var a=[];var B=[];for(y=0,d=g.length;y<d;y++){B[g[y][A]]=g[y]}for(y=0,d=g.length;y<d;y++){if(B[g[y][z]]&&g[y][A]!=g[y][z]){if(!B[g[y][z]][b]){B[g[y][z]][b]=[]}B[g[y][z]][b].push(g[y])}else{a.push(g[y])}}return a}else{return[g]}},getNodeTitle:function(b,d){var a=b.data.key.title===""?b.data.key.name:b.data.key.title;return""+d[a]},getNodeName:function(b,d){var a=b.data.key.name;return""+d[a]},makeNodeFontCss:function(a,b){var d=r.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return(d&&((typeof d)!="function"))?d:{}},makeDOMNodeIcon:function(b,d,g){var y=c.getNodeName(d,g),a=d.view.nameIsHTML?y:y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");b.push("<span id='",g.tId,k.id.ICON,"' title='' treeNode",k.id.ICON," class='",c.makeNodeIcoClass(d,g),"' style='",c.makeNodeIcoStyle(d,g),"'></span><span class='ser-name' id='",g.tId,k.id.SPAN,"'>",a,"</span>")},makeDOMNodeLine:function(a,b,d){a.push("<span id='",d.id,k.id.SWITCH,"' title='' class='",c.makeNodeLineClass(b,d),"' treeNode",k.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(a,b,d){a.push("</li>")},makeDOMNodeMainBefore:function(a,b,d){a.push("<li id='",d.id,"' class='",k.className.LEVEL,d.level,"' cid='",d.cid,"'>")},makeDOMNodeNameAfter:function(a,b,d){a.push("</a>")},makeDOMNodeNameBefore:function(d,g,y){var B=c.getNodeTitle(g,y),b=c.makeNodeUrl(g,y),a=c.makeNodeFontCss(g,y),A=[];for(var z in a){A.push(z,":",a[z],";")}d.push("<a id='",y.tId,k.id.A,"' class='",k.className.LEVEL,y.level,"' treeNode",k.id.A,((b!=null&&b.length>0)?"href='"+b+"'":"")," style='",A.join(""),"'");if(r.apply(g.view.showTitle,[g.treeId,y],g.view.showTitle)&&B){d.push("title='",B.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'")}d.push(">")},makeNodeFontCss:function(a,b){var d=r.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return(d&&((typeof d)!="function"))?d:{}},makeNodeIcoClass:function(b,d){var a=["ico"];if(!d.isAjaxing){a[0]=(d.iconSkin?d.iconSkin+"_":"")+a[0];if(d.isParent){a.push(d.open?d.isopen?k.folder.OPEN:k.folder.CLOSE:k.folder.CLOSE)}else{a.push(k.folder.DOCU)}}return k.className.BUTTON+" "+a.join("_")},makeNodeIcoStyle:function(b,d){var g=[];if(!d.isAjaxing){var a=(d.isParent&&d.iconOpen&&d.iconClose)?(d.open?d.iconOpen:d.iconClose):d.icon;if(a){g.push("background:url(",a,") 0 0 no-repeat;")}if(d.isParent||(b.view.showIcon==false||!r.apply(b.view.showIcon,[b.treeId,d],true))){g.push("width:0px;height:0px;")}}return g.join("")},makeNodeLineClass:function(b,d){var a=[];if(b.view.showLine){if(d.level==0&&d.isFirstNode&&d.isLastNode){a.push(k.line.ROOT)}else{if(d.level==0&&d.isFirstNode){a.push(k.line.ROOTS)}else{if(d.isLastNode){a.push(k.line.BOTTOM)}else{a.push(k.line.CENTER)}}}}else{a.push(k.line.NOLINE)}if(d.isParent){a.push(d.open?d.isopen?k.folder.OPEN:k.folder.CLOSE:k.folder.CLOSE)}else{a.push(k.folder.DOCU)}return c.makeNodeLineClassEx(d)+a.join("_")},makeNodeLineClassEx:function(a){return k.className.BUTTON+" "+k.className.LEVEL+a.level+" "+k.className.SWITCH+" "},makeNodeTarget:function(a){return(a.target||"_blank")},makeNodeUrl:function(b,d){var a=b.data.key.url;return d[a]?d[a]:null},makeUlHtml:function(b,g,a,d){a.push("<ul id='",g.tId,k.id.UL,"' class='",k.className.LEVEL,g.level,c.makeUlLineClass(b,g),"' style='display:",(g.open?(g.isopen?"block":"none"):"none"),"'>");a.push(d);a.push("</ul>")},makeUlLineClass:function(a,b){return((a.view.showLine&&!b.isLastNode)?k.line.LINE:"")},initNode:function(C,b,y,z,B,A,d){if(!y){return}var a=c.getRoot(C),g=C.data.key.children;y.level=b;y.tId=C.treeId+"_"+(++a.zId);y.parentTId=z?z.tId:null;y.open=(typeof y.open=="string")?r.eqs(y.open,"true"):!!y.open;y.open=true;y.isopen=false;if(y[g]&&y[g].length>0){y.isParent=true;y.zAsync=true;if(j){y.isopen=true}else{y.isopen=false}}else{if(j){y.isopen=true;j=false}else{y.isopen=false}y.isParent=(typeof y.isParent=="string")?r.eqs(y.isParent,"true"):!!y.isParent;y.open=(y.isParent&&!C.async.enable)?y.open:false;y.zAsync=!y.isParent}y.isFirstNode=B;y.isLastNode=A},addCreatedNode:function(b,d){if(!!b.view.addDiyDom){var a=c.getRoot(b);a.createdNodes.push(d)}},appendNodes:function(J,b,d,F,a,g){if(!d){return[]}var E=[],y=J.data.key.children;for(var D=0,C=d.length;D<C;D++){var B=d[D];if(B.id!=1){if(a){var A=(F)?F:c.getRoot(J),I=A[y],H=((I.length==d.length)&&(D==0)),G=(D==(d.length-1));c.initNode(J,b,B,F,H,G,g)}var z=[];if(B[y]&&B[y].length>0){z=c.appendNodes(J,b+1,B[y],B,a,g&&B.open)}if(g){c.makeDOMNodeMainBefore(E,J,B);c.makeDOMNodeLine(E,J,B);c.makeDOMNodeNameBefore(E,J,B);c.makeDOMNodeIcon(E,J,B);c.makeDOMNodeNameAfter(E,J,B);if(B.isParent&&B.open){c.makeUlHtml(J,B,E,z.join(""))}c.makeDOMNodeMainAfter(E,J,B);c.addCreatedNode(J,B)}}}return E},createNodeCallback:function(b){if(!!b.view.addDiyDom){var a=c.getRoot(b);while(a.createdNodes.length>0){var d=a.createdNodes.shift();r.apply(b.view.addDiyDom,[b.treeId,d]);if(!!b.callback.onNodeCreated){b.treeObj.trigger(k.event.NODECREATED,[b.treeId,d])}}}},createNodes:function(C,a,b,A){if(!b||b.length==0){return}var B=c.getRoot(C),y=C.data.key.children,g=!A||A.open||!!$$(A[y][0],C).get(0);g=true;B.createdNodes=[];var z=c.appendNodes(C,a,b,A,true,g);if(!A){C.treeObj.append(z.join(""))}else{var d=$$(A,k.id.UL,C);if(d.get(0)){d.append(z.join(""))}}c.createNodeCallback(C)},init:function(b){j=true;l.treeObj.empty();var d=c.getRoot(l),g=l.data.key.children;if(l.data.simpleData.enable){d[g]=c.transformTomTreeFormat(l,b)}if(d[g]&&d[g].length>0){c.createNodes(l,0,d[g])}var a=0;l.treeObj.find("li a").each(function(y,z){$(z).prev().unbind("click");$(z).unbind("click")});l.treeObj.find("li a").each(function(y,z){$(z).prev().click(function(D){D.preventDefault(),D.stopPropagation();var C=$(this).parent();if(C.find("ul").size()>0){var B=new Date();if(B.getTime()-a>500){a=B.getTime();var A=C.attr("id");if(C.find("ul").first().css("display")=="none"){C.find("ul").first().show();$("#"+A+"_switch").removeClass("noline_close").addClass("noline_open");$("#mTree_"+A+"_ico").removeClass("ico_close").addClass("ico_open")}else{C.find("ul").first().hide();$("#"+A+"_switch").removeClass("noline_open").addClass("noline_close");$("#mTree_"+A+"_ico").removeClass("ico_open").addClass("ico_close")}e.refreshS()}}});$(z).click(function(I){I.preventDefault(),I.stopPropagation();var B=$(this).parent();if(B.find("ul").size()>0){var C=new Date();if(C.getTime()-a>500){a=C.getTime();var F=B.attr("id");if(B.find("ul").first().css("display")=="none"){B.find("ul").first().show();$("#"+F+"_switch").removeClass("noline_close").addClass("noline_open");$("#mTree_"+F+"_ico").removeClass("ico_close").addClass("ico_open")}else{B.find("ul").first().hide();$("#"+F+"_switch").removeClass("noline_open").addClass("noline_close");$("#mTree_"+F+"_ico").removeClass("ico_open").addClass("ico_close")}e.refreshS()}}else{$("#loading").show();l.treeObj.find("li a").removeClass("curSelectedNode");$(this).addClass("curSelectedNode");var H=B.attr("cid");var D=$(this).parent().parent().parent();var G=D.attr("cid");x.ShowElement("",H,G,0);var E=$("#f-name").html();var A=$(this).find(".ser-name").html();e.PScrollToInit();w.init(E,A);w.showLeft()}})})}};var m={swipeTree:$("#swipeTree"),contShow:$("#swipeTop"),swipeTabCont:$("#swipeTopCont"),wrap:$("#wrap"),leftCate:$("#leftCate"),leftmask:$(".leftmask"),bodyH:u.windowH.height,init:function(){},showLeft:function(b){var a=this;$("#f-name").html(b),a.leftmask.show(),a.leftCate.show(),a.contShow.css({"backface-visibility":"hidden",prespective:"1000","transform-style":"preserve-3d",width:"100%"}),a.leftCate.css({width:(($(window).width()-50)/$(window).width())*100+"%",height:a.bodyH,top:"0px"}),a.swipeTree.css({height:u.windowH.height-$("#f-title").height()}),a.leftmask.css({top:"0px"}),u.trans2d.translation(a.contShow[0],{x:0},function(){a.leftmask.css({height:a.leftCate.height()})})},hideLeft:function(){var a=this;u.trans2d.translation(a.leftCate[0],{x:$(window).width()-50,duration:"0.4s"},function(){a.leftmask.hide(),a.leftCate.hide(),a.leftCate.attr("style",""),a.contShow.attr("style","")})},refresh:function(){var d=this,a=null;a=setTimeout(function(){var g=d.swipeTabCont.height()+70;d.wrap.css({"min-height":g}),d.leftCate.css({"min-height":g}),d.leftmask.css({height:d.wrap.height()})},500)}};var o={prefacid:""};var e={refreshF:function(){u.myScroll.myFScroll.refresh()},refreshS:function(){u.myScroll.mySScroll.refresh()},refreshP:function(){$("#priceInfo").css({height:u.windowH.height-$("#se-bar").height()-$(".banners").height()-$(".product").height()-$(".TabTitle").height()-15});u.myScroll.myPScroll.refresh()},refreshC:function(){u.myScroll.myCScroll.refresh()},refreshE:function(){u.myScroll.myEScroll.refresh()},SScrollToInit:function(){return u.myScroll.mySScroll.scrollTo(0,u.myScroll.mySScroll.y,0,true)},PScrollToInit:function(){return u.myScroll.myPScroll.scrollTo(0,u.myScroll.myPScroll.y,0,true)},CScrollToInit:function(){return u.myScroll.myCScroll.scrollTo(0,u.myScroll.myCScroll.y,0,true)},EScrollToInit:function(){return u.myScroll.myEScroll.scrollTo(0,u.myScroll.myEScroll.y,0,true)}};var p={layout:function(b){this.firstView(b);var d=$("#J_Header");$("#factory").on("click","li",function(g){g.preventDefault();var a=$(this),z=a.html(),y=a.attr("data");if(y.length>0){f.init(z,y)}})},firstView:function(y){var g="";var z="";var A="";if(y&&y.length){for(var C=0;C<y.length;C++){var B=y[C];if(C==1){z+='<li class="top '+B.name+'" data="">'+B.name+"</li>"}else{if(C>1&&C<12){if(B.open){z+='<li class="light '+B.name+'" data="">'+B.name+"</li>"}else{if(B.n==1){z+='<li data="'+B.fid+'">'+B.name+'<span class="fnew"></span></li>'}else{z+='<li data="'+B.fid+'">'+B.name+"</li>"}}}else{if(C>=12){if(B.open){g+='<li class="light '+B.name+'" data="">'+B.name+"</li>";A+='<li class="ui-li-static"><span>'+B.name+"</span></li>"}else{if(B.n==1){g+='<li data="'+B.fid+'">'+B.name+'<span class="fnew"></span></li>'}else{g+='<li data="'+B.fid+'">'+B.name+"</li>"}}}}}}$("#factory").html('<div class="rellkey"><ul>'+z+'</ul><ul id="alllist">'+g+"</ul></div>");$("#sorter").html('<ul class="ui-listview">'+A+"</ul>");e.refreshF()}}};var f={init:function(y,g){$("#loading").show();if(o.prefacid.length>0&&g==o.prefacid){m.showLeft(y);$("#loading").hide()}else{var a=new Date();var b={type:"GET",url:"price/"+g+".js?t="+a.getTime(),timeout:50000,dataType:"json",beforeSend:function(){e.SScrollToInit(),$("#mTree").empty(),$("#mTree").html("<li>\u6b63\u5728\u4e3a\u60a8\u52a0\u8f7d...</li>"),m.showLeft(y)},success:function(d){c.init(d);m.init();$("#loading").hide();o.prefacid=g;e.refreshS()},complete:function(){$("#loading").hide()},error:function(d){$("#mTree").html("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5");$("#loading").hide()}};$.ajax(b)}},hideSeriesTree:function(){$(".leftmask").hide();m.hideLeft()}};u.SeriesTree=f;var t=new Date();var s={type:"GET",url:"price/factory.js?t="+t.getTime(),timeout:50000,dataType:"json",success:function(a){u.FactoryJson=a;p.layout(a);$(".leftmask").on("click",function(){var b=$(this);b.hide(),m.hideLeft()})},error:function(a){$("#factory").html("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5")}};$.ajax(s)}(window,window.lib||(window.lib={})),function(a,b){var factoryJson={getFactoryJson:function(){return b.FactoryJson}};var myScroll={refreshP:function(){b.myScroll.myPScroll.refresh()},refreshC:function(){b.myScroll.myCScroll.refresh()},refreshE:function(){b.myScroll.myEScroll.refresh()},refreshH:function(){b.myScroll.myHScroll.refresh()},refreshA:function(){b.myScroll.myAScroll.refresh()},refreshT:function(){b.myScroll.myTScroll.refresh()},PScrollToInit:function(){return b.myScroll.myPScroll.scrollTo(0,b.myScroll.myPScroll.y,0,true)},CScrollToInit:function(){return b.myScroll.myCScroll.scrollTo(0,b.myScroll.myCScroll.y,0,true)},EScrollToInit:function(){return b.myScroll.myEScroll.scrollTo(0,b.myScroll.myEScroll.y,0,true)},HScrollToInit:function(){return b.myScroll.myHScroll.scrollTo(0,b.myScroll.myHScroll.y,0,true)},AScrollToInit:function(){return b.myScroll.myAScroll.scrollTo(0,b.myScroll.myAScroll.y,0,true)},TScrollToInit:function(){return b.myScroll.myTScroll.scrollTo(0,b.myScroll.myTScroll.y,0,true)}};var se={ShowElement:function(innermodel,classid,pclassid,initTab){new b.ShowPrice(innermodel,classid,pclassid,initTab)},InitElementPage:function(fname,sname){b.ShowEle.init(fname,sname)},ShowElementPage:function(){b.ShowEle.showLeft()},HideElementPage:function(){b.ShowEle.hideLeft()}};var storage={ls:window.localStorage,setItem:function(key,value){storage.ls.setItem(key,value)},getItem:function(key){return storage.ls.getItem(key)},clearItem:function(key){storage.ls.setItem(key,"")},addHistory:function(key,id,name){var s_record=eval('({"id":"'+id+'","name":"'+name+'"})');var r_list=new Array();r_list.push(s_record);var history=storage.getItem(key);if(history!=""&&history!=null){var json=JSON.parse(history);$.each(json,function(i){var s=json[i];if(id.length>0){if(s.id!=s_record.id){r_list.push(s)}}else{if(s.name!=s_record.name){r_list.push(s)}}})}storage.setItem(key,JSON.stringify(r_list));storage.getHistory(key)},getHistory:function(key){$("#historylist").html("");myScroll.HScrollToInit();var history=storage.getItem(key);if(history!=""&&history!=null){var json=JSON.parse(history);$.each(json,function(i){var s=json[i];if(key!="factory"){if(s.name!=""){$("<li/>").appendTo($("#historylist")).html('<i class="text-icon"></i><span>'+s.name+"</span>").attr("class","sp-li").attr("data",s.name).click(function(){$("#sp-text").blur();$(".btn-reset").show();var searchstr=$(this).attr("data");$("#sp-text").val(searchstr);search.searchLoad(true)})}}else{if(s.id!=""){$("<li/>").appendTo($("#historylist")).html('<i class="text-icon"></i><span>'+s.name+"</span>").attr("class","sp-li").attr("data",s.id).click(function(){$("#sf-text").blur();$(".btn-reset").show();var searchstr=$(this).find("span").text();var factoryid=$(this).attr("data");b.SeriesTree.init(searchstr,factoryid)})}}});$("#sp-trash").show();myScroll.refreshH()}else{$("#sp-trash").hide()}}};var ssetting={dtype:"",sortkey:"",sortrule:false,mfname:"",mfother:" ",isother:false,epageindex:1,spageindex:1,brandOpen:false,stypeOpen:false,factoryName:"",fullName:"",shortName:"",count:0,timeout:0,option:0};var search={initElement:function(initscroll){search.closeMask();var modstr=$.trim($("#sp-text").val());var dtype=ssetting.dtype;var mfname=ssetting.mfname;if(initscroll){$("#e-content").empty();ssetting.epageindex=1}else{ssetting.epageindex++}$("#sp-text").val(modstr);var ordertype=ssetting.sortrule?"false":"true";var mydate=new Date();$.ajax({type:"GET",url:"../price/getpriceelesearchjson.php?t="+mydate.getTime()+"&modstr="+encodeURIComponent(modstr)+"&dtype="+dtype+"&mfname="+encodeURIComponent(mfname)+"&orderstr="+ssetting.sortkey+"&ordertype="+ordertype+"&pageindex="+ssetting.epageindex+"&client=msg",timeout:50000,dataType:"json",beforeSend:function(){if(initscroll){$("#e-content").empty()}},success:function(e){if(e==null||e.Table.length==0){if(initscroll){$("#epullUp").hide();$("#e-content").empty();$("#sales-model").off("click");$("#sales-price").off("click");$("#e-content").html('<span style="margin:43px;line-height:43px;">\u5f88\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u4e0e<strong>'+modstr+"...</strong>\u76f8\u7b26\u7684\u5143\u4ef6\u3002</span>")}}else{ssetting.count=e.T_Count[0].Count;$("#brand").off("click");$("#brand").on("click",function(){if(ssetting.brandOpen){search.closeMask()}else{search.openMask()}});search.showElementList(false,e.Table);$("#sales-model").off("click");$("#sales-model").on("click",function(){$("#epullUp").hide();$("#loading").show();search.closeMask();search.sortShow(this);ssetting.sortkey="p.F_Model";search.initElement(true)});$("#sales-price").off("click");$("#sales-price").on("click",function(){$("#epullUp").hide();$("#loading").show();search.closeMask();search.sortShow(this);ssetting.sortkey="p.F_TotalPrice";search.initElement(true)});if(ssetting.mfname.length==0&&ssetting.epageindex==1){ssetting.isother=false;var ff=$("#factoryfilter");ff.empty();$("<li/>").appendTo(ff).html("\u4e0d\u9650").addClass("active").click(function(){$("#factoryfilter").find("li").removeClass("active");$(this).addClass("active");$("#loading").show();ssetting.mfname="";search.sortHide();search.showElement();search.initElement(true)});if(typeof e.T_ManufacturerName!=="undefined"||e.T_ManufacturerName!=null){ssetting.shortName="";var sarray=new Array();var farray=new Array();$.each(e.T_ManufacturerName,function(i){var f=e.T_ManufacturerName[i];if($.inArray(f.F_ManufacturerName,sarray)==-1){sarray.push(f.F_ManufacturerName);var fid=search.getFactoryID(f.F_ManufacturerName);if(fid.length>0){if($.inArray(fid,farray)==-1){farray.push(fid);$("<li/>").appendTo(ff).html(ssetting.shortName).attr("data",ssetting.fullName).click(function(){$("#factoryfilter").find("li").removeClass("active");$(this).addClass("active");$("#loading").show();ssetting.mfname=$(this).html()+"\u222a"+$(this).attr("data");ssetting.dtype="";search.sortHide();search.showElement();search.initElement(true)})}}else{ssetting.isother=true;ssetting.mfother=ssetting.mfother+"\u222a"+f.F_ManufacturerName}}});if(ssetting.isother){$("<li/>").appendTo(ff).html("\u5176\u5b83").click(function(){$("#factoryfilter").find("li").removeClass("active");$(this).addClass("active");$("#loading").show();ssetting.mfname=ssetting.mfother;ssetting.dtype="";search.sortHide();search.showElement();search.initElement(true)})}}}var scrollH=b.windowH.height-$("#ser-bar").height();var contentH=$("#e-content").height();if(contentH>scrollH){$("#epullUp").show()}}$("#loading").hide();myScroll.refreshE();if(initscroll){myScroll.EScrollToInit()}storage.addHistory("element","",modstr)},complete:function(){$("#loading").hide()},error:function(a){if(initscroll){$("#e-content").empty();$("#factoryfilter").empty();$("#sales-model").off("click");$("#brand").off("click");$("#sales-price").off("click");$("#e-content").html('<span style="margin:43px;line-height:43px;">\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5</span>')}$("#loading").hide();storage.addHistory("element","",modstr)}})},showElementList:function(issort,e){ssetting.factoryName="";ssetting.shortName="";$.each(e,function(i){var u=e[i];search.showElementHtml(u)})},showElementHtml:function(u){var s=$("#e-content");var cataname="";if(u.F_CategoryName!=null){cataname=u.F_CategoryName}if(ssetting.factoryName!=u.F_ManufacturerName){var fname=search.getFactoryName(u.F_ManufacturerName);if(fname.length>0){ssetting.shortName=fname}else{ssetting.shortName=u.F_ManufacturerName}ssetting.factoryName=u.F_ManufacturerName}if(u.F_type==2){$("<div/>").appendTo(s).html('<div><span class="model bluec">'+u.F_Model+'</span><div class="clear"></div></div><div><span class="categ">'+cataname+'</span><span class="price bluec">\uffe5<b>'+parseFloat(u.F_Price).toFixed(2)+'</b></span><div class="clear"></div></div><div><span class="brand bluec">'+ssetting.shortName+'</span><span class="findsup"><b>UGC</b></span><div class="clear"></div></div>').attr("class","elelist").attr("cid",u.F_Class_ID).attr("data",u.F_InnerModel).attr("fname",u.F_ManufacturerName).attr("sname",u.F_ClassName)}else{$("<div/>").appendTo(s).html('<div><span class="model">'+u.F_Model+'</span><div class="clear"></div></div><div><span class="categ">'+cataname+'</span><span class="price">\uffe5<b>'+parseFloat(u.F_Price).toFixed(2)+'</b></span><div class="clear"></div></div><div><span class="brand">'+ssetting.shortName+'</span><span class="findsup"><b></b></span><div class="clear"></div></div>').attr("class","elelist").attr("cid",u.F_Class_ID).attr("data",u.F_InnerModel).attr("fname",u.F_ManufacturerName).attr("sname",u.F_ClassName).click(function(){$(".elelist").removeClass("over");$(this).addClass("over");$("#loading").show();var model=$(this).attr("data");var classid=$(this).attr("cid");se.ShowElement(model,classid,"",0);var fname=$(this).attr("fname");var sname=$(this).attr("sname");se.InitElementPage(fname,sname);se.ShowElementPage()})}},getFactoryID:function(n){var f=factoryJson.getFactoryJson();var d="";$.each(f,function(e){var fname=f[e].name.split("-");if(n!=null&&(f[e].s==n||fname[0]==n)){d=f[e].fid;ssetting.fullName=fname[0];ssetting.shortName=f[e].s;return false}});return d},getFactoryName:function(n){var f=factoryJson.getFactoryJson();var d="";$.each(f,function(e){var fname=f[e].name.split("-");if(n!=null&&fname[0]==n){d=f[e].s;return false}});return d},sortShow:function(c){$(".search-tab span").removeClass("rowsort");$(".search-tab span").removeClass("active");$(c).addClass("rowsort");$(c).addClass("active");if(ssetting.sortrule){$(c).find("a").removeClass("arrow-down");$(c).find("a").addClass("arrow-up");ssetting.sortrule=false}else{$(c).find("a").removeClass("arrow-up");$(c).find("a").addClass("arrow-down");ssetting.sortrule=true}},sortHide:function(){ssetting.sortkey="";$(".search-tab span").removeClass("rowsort");$(".search-tab span").removeClass("active")},closeMask:function(){$("#sub-tab").hide();$("#brand-mask").css({height:"0px;","margin-top":"0px;"}).hide();ssetting.brandOpen=false},openMask:function(){$(".search-tab span").removeClass("rowsort");$(".search-tab span").removeClass("active");$("#brand").addClass("active");$("#sub-tab").show();$("#brand-mask").css({height:b.windowH.height,top:"0px"}).show();ssetting.brandOpen=true;myScroll.TScrollToInit();myScroll.refreshT()},stcloseMask:function(){$("#se-menu").removeClass("barmask-open");$("#logodiv").find("a").removeClass("more-open");ssetting.stypeOpen=false},stopenMask:function(){$("#se-menu").show();$("#logodiv").find("a").addClass("more-open");$("#se-menu").addClass("barmask-open");ssetting.stypeOpen=true},showElement:function(){$(".sr-goback").off("click");$(".sr-goback").on("click",function(){search.hideElement()});$("#epullUp").hide();$("#searchele").css({height:b.windowH.height-$("#ser-bar").height()});$("#sresult").show(),$("#erTop").show(),$("#erTop").css({"backface-visibility":"hidden",prespective:"1000","transform-style":"preserve-3d",width:"100%"}),$("#sresult").css({height:b.windowH.height,width:"100%",top:"0px"}),b.trans2d.translation($("#erTop")[0],{x:0},function(){})},hideElement:function(){b.trans2d.translation($("#erTop")[0],{x:$(window).width(),duration:"0.4s"},function(){$("#erTop").hide(),$("#erTop").attr("style",""),$("#sresult").attr("style","")})},initSeries:function(initscroll){var seri=$.trim($("#sp-text").val());if(initscroll){$("#s-content").html("");ssetting.spageindex=1}else{ssetting.spageindex++}$("#sp-text").val(seri);var mydate=new Date();$.ajax({type:"GET",url:"../price/getsearchclassjson.php?t="+mydate.getTime()+"&series="+encodeURIComponent(seri)+"&pageindex="+ssetting.spageindex+"&client=msg",timeout:50000,dataType:"json",beforeSend:function(){if(initscroll){$("#s-content").empty()}},success:function(e){if(e==null||e.Table.length==0){if(initscroll){$("#spullUp").hide();$("#s-content").empty();$("#s-content").html('<span style="margin:43px;line-height:43px;">\u5f88\u62b1\u6b49\uff0c\u5728\u7cfb\u5217\u4e2d\u6ca1\u6709\u627e\u5230\u4e0e<strong>'+seri+"</strong>\u76f8\u5173\u7684\u7ed3\u679c\u3002</span>")}}else{var s=$("#s-content");s.empty();$.each(e.Table,function(i){var u=e.Table[i];$("<div/>").appendTo(s).html('<i class="serioc text-icon"></i>'+u.F_Class_Name+" --- "+u.F_Manufacturer_Name).attr("class","serlist").attr("data",u.F_Class_ID).attr("fname",u.F_Manufacturer_Name).attr("sname",u.F_Class_Name).click(function(){$(".serlist").removeClass("over");$(this).addClass("over");$("#loading").show();var classid=$(this).attr("data");se.ShowElement("",classid,"",0);var fname=$(this).attr("fname");var sname=$(this).attr("sname");se.InitElementPage(fname,sname);se.ShowElementPage()})})}$("#loading").hide();myScroll.refreshC();if(initscroll){myScroll.CScrollToInit()}storage.addHistory("series","",seri)},complete:function(){$("#loading").hide()},error:function(a){if(initscroll){$("#s-content").empty();$("#s-content").html('<span style="margin:43px;line-height:43px;">\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5</span>')}$("#loading").hide();storage.addHistory("series","",seri)}})},showSeries:function(){$(".sr-goback").off("click");$(".sr-goback").on("click",function(){search.hideSeries()});$("#spullUp").hide();$("#searchser").css({height:b.windowH.height-$("#ssr-bar").height()});$("#sresult").show(),$("#srTop").show(),$("#srTop").css({"backface-visibility":"hidden",prespective:"1000","transform-style":"preserve-3d",width:"100%"}),$("#sresult").css({height:b.windowH.height,width:"100%",top:"0px"}),b.trans2d.translation($("#srTop")[0],{x:0},function(){})},hideSeries:function(){b.trans2d.translation($("#srTop")[0],{x:$(window).width(),duration:"0.4s"},function(){$("#srTop").hide(),$("#srTop").attr("style",""),$("#sresult").attr("style","")})},setInputStatus:function(){var key=$("#sp-text").val(),word=key.replace(/( |[\s\u3000])/g,"");if(word!==""){clearTimeout(ssetting.timeout);ssetting.timeout=setTimeout(function(){$(".btn-reset").show()},100)}else{$(".btn-reset").hide()}},searchLoad:function(init){$("#sp-text").blur();var kw=$.trim($("#sp-text").val());if(ssetting.option=="0"){if(kw.length>0&&kw!="\u8f93\u578b\u53f7...\u67e5\u4ef7\u683c"){$("#loading").show(),$("#erTop").show();if(init){ssetting.mfname=""}search.sortHide(),search.showElement(),search.initElement(true);$("#downmenu").css({top:b.windowH.height-$("#downmenu").height()})}else{$("#sresult").hide();$("#loading").hide();$("#sp-text").focus()}}else{if(ssetting.option=="1"){if(kw.length>0&&kw!="\u67e5\u7cfb\u5217"){$("#loading").show(),$("#srTop").show(),search.showSeries();search.initSeries(true)}else{$("#sresult").hide();$("#loading").hide();$("#sp-text").focus()}}else{if(ssetting.option=="2"){var fkw=$.trim($("#sf-text").val());if(fkw.length>0&&fkw!="\u641c\u54c1\u724c"){$("#ac_results").show();$("#ac_results").find(".scroller").show()}else{$("#ac_results").hide();$("#ac_results").find(".scroller").hide();$("#sf-text").focus()}}}}},autocompleteClick:function(event,rdata,factoryid){$("#sf-text").blur();b.SeriesTree.init(rdata.name,rdata.fid);storage.addHistory("factory",rdata.fid,rdata.name)},refresh:function(){myScroll.AScrollToInit();myScroll.refreshA()}};b.Search=search;b.SearchSetting=ssetting;$("#sp-submit").on("click",function(e){search.searchLoad(true)});$("#sp-text,#sf-text").on("keydown",function(e){if(e.keyCode==13){search.searchLoad(true)}});$("#logodiv").on("click",function(e){if(ssetting.stypeOpen){search.stcloseMask()}else{search.stopenMask()}});$("#se-menu-close").on("click",function(e){search.stcloseMask()});$("#sb-box").on("click",function(e){$("#searchpage").show();if(ssetting.option=="0"){$("#sf-text").hide();$("#sp-text").show();$("#history").css({height:$("#sp-content").height()-$("#sp-top").height()-$("#sp-trash").height()});storage.getHistory("element");$("#sp-text").focus()}else{if(ssetting.option=="1"){$("#sf-text").hide();$("#sp-text").show();$("#history").css({height:$("#sp-content").height()-$("#sp-top").height()-$("#sp-trash").height()});storage.getHistory("series");$("#sp-text").focus()}else{$("#sp-text").hide();$("#sf-text").show();$("#sf-text").unautocomplete();$("#history").css({height:$("#sp-content").height()-$("#sp-top").height()-$("#sp-trash").height()});storage.getHistory("factory");var options={minChars:1,max:500,width:"100%",height:b.windowH.height,top:$("#sp-bar").height()+1,matchContains:true,tipText:"\u641c\u54c1\u724c",reset:".btn-reset",formatItem:function(row,rowNum,rowCount,searchItem){return row.name},formatMatch:function(row,rowNum,rowCount){return row.id+"_"+row.py+"_"+row.name},formatResult:function(row,rowNum,rowCount){return row.name}};var scdata=new Array();$.each(b.FactoryJson,function(d){var sc=b.FactoryJson[d];if(sc.fid!=1){if(sc.pId!=2){scdata.push(sc)}}});$("#sf-text").autocomplete(scdata,options);$("#sf-text").result(search.autocompleteClick);$("#sf-text").refresh(search.refresh);$("#sf-text").focus()}}});$("#sp-goback").on("click",function(e){$(".ac_results").hide();$("#searchpage").hide()});$("#sr-bar-refresh").on("click",function(e){search.searchLoad(false)});$("#sr-bar-home").on("click",function(e){$(".ac_results").hide();$("#searchpage").hide();search.hideElement()});$("#ss-bar-refresh").on("click",function(e){search.searchLoad(true)});$("#ss-bar-home").on("click",function(e){$(".ac_results").hide();$("#searchpage").hide();search.hideSeries()});$("#se-bar-home").on("click",function(e){$(".ac_results").hide();$("#searchpage").hide();search.hideElement();search.hideSeries();b.SeriesTree.hideSeriesTree();se.HideElementPage()});$(".block-group").find("span").on("click",function(e){$(".block-group").find("a").removeClass("btn-weak");$(this).find("a").addClass("btn-weak");search.hideElement();search.hideSeries();$(".sp-ctop").hide();var option=$(this).attr("data-index");ssetting.option=option;switch(option){case"0":$("#sf-text").hide();$("#sp-text").show();$("#searchtype").html("\u5143\u4ef6");$("#searchtip").html("\u8f93\u578b\u53f7,\u67e5\u4ef7\u683c");$("#sp-text").attr("placeholder","\u8f93\u578b\u53f7,\u67e5\u4ef7\u683c");$("#se-top").show();$("#sp-text").val("");break;case"1":$("#sf-text").hide();$("#sp-text").show();$("#searchtype").html("\u7cfb\u5217");$("#searchtip").html("\u67e5\u7cfb\u5217");$("#sp-text").attr("placeholder","\u67e5\u7cfb\u5217");$("#ss-top").show();$("#sp-text").val("");break;case"2":$("#sf-text").hide();$(".btn-reset").hide();$("#sp-text").show();$("#searchtype").html("\u54c1\u724c");$("#searchtip").html("\u641c\u54c1\u724c");$("#sf-top").show();$("#sf-text").val("");break}$(".btn-reset").hide();search.stcloseMask()});$("#recom-el,#se-top").find("span").on("click",function(e){$("#loading").show();var model=$(this).attr("data");var classid=$(this).attr("cid");se.ShowElement(model,classid,"",0);var fname=$(this).attr("fname");var sname=$(this).attr("sname");se.InitElementPage(fname,sname);se.ShowElementPage()});$("#recom-sr,#ss-top").find("span").on("click",function(e){$("#loading").show();var classid=$(this).attr("data");se.ShowElement("",classid,"",0);var fname=$(this).attr("fname");var sname=$(this).attr("sname");se.InitElementPage(fname,sname);se.ShowElementPage()});$("#recom-fa,#sf-top").find("span").on("click",function(e){var factoryid=$(this).attr("data");var name=$(this).text();b.SeriesTree.init(name,factoryid)});$("#clearhistory").on("click",function(e){if(ssetting.option=="0"){storage.clearItem("element")}else{if(ssetting.option=="1"){storage.clearItem("series")}else{if(ssetting.option=="2"){storage.clearItem("factory")}}}$("#historylist").html("");$("#sp-trash").hide()});$(".barmask").on("click",function(e){search.stcloseMask()});$("#sp-text").bind("input",search.setInputStatus);$(".btn-reset").on("click",function(e){if(ssetting.option=="2"){$("#sf-text").val("");$("#sf-text").focus()}else{$("#sp-text").val("");$("#sp-text").focus()}$(this).hide();$("#ac_results").hide()});$("#sub-tab-close,#brand-mask").on("click",function(e){search.closeMask()})}(window,window.lib||(window.lib={}),window.app||(window.app={})),function(d,c){if(document.body.scrollTop>0){$("#sorter").hide();(app&&app.scroll)?app.scroll.scrollTo(0):scroll(0,0)}}(window,window.lib||(window.lib={}));!function(d,c){var g={initElement:function(a){$("#loading").show();c.Search.initElement(a)},initSeries:function(a){$("#loading").show();c.Search.initSeries(a)},setting:function(){return c.SearchSetting}};var f={myFScroll:null,mySScroll:null,myPScroll:null,myCScroll:null,myEScroll:null,myHScroll:null,myTScroll:null,myAScroll:null,isShowSort:true};f.myFScroll=new iScroll("wrap",{onScrollEnd:function(){if(f.isShowSort){if(this.y<-200){f.isShowSort=false;$("#sorter").show();var b=parseInt((c.windowH.height-$("#sorter").height())/2);var a=$("#bar").height();$("#sorter").css({top:b>a?b:a+10})}else{return false}}else{return false}}});f.mySScroll=new iScroll("swipeTree");f.myPScroll=new iScroll("priceInfo",{onBeforeScrollStart:function(b){var a=b.explicitOriginalTarget?b.explicitOriginalTarget.nodeName.toLowerCase():(b.target?b.target.nodeName.toLowerCase():"");if(a!="input"&&a!="a"){b.preventDefault()}}});var e=$("#epullUp");var i=0;f.myEScroll=new iScroll("searchele",{hScroll:false,useTransition:true,topOffset:0,onRefresh:function(){if(e.hasClass("loading")){e.removeClass("loading flip");e.find(".pullUpLabel").html("\u5411\u4e0a\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a...")}},onScrollMove:function(){if(g.setting().epageindex*50<g.setting().count){if(this.y<(this.maxScrollY-30)&&!e.hasClass("flip")){e.addClass("flip");e.find(".pullUpLabel").html("\u91ca\u653e\u52a0\u8f7d\u4e0b\u4e00\u9875...")}else{if(this.y>(this.maxScrollY+30)&&e.hasClass("flip")){e.removeClass("loading flip");e.find(".pullUpLabel").html("\u5411\u4e0a\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a...")}}if(this.y<i){$("#downmenu").hide();$("#searchele").css({height:c.windowH.height-$("#ser-bar").height()})}else{if(this.y>i){$("#searchele").css({height:c.windowH.height-$("#ser-bar").height()});$("#downmenu").hide()}}i=this.y}else{e.hide()}},onScrollEnd:function(){if(g.setting().epageindex*50<g.setting().count){if(e.hasClass("flip")){e.addClass("loading");e.find(".pullUpLabel").html("Loading...");g.initElement(false)}$("#searchele").css({height:c.windowH.height-$("#ser-bar").height()});$("#downmenu").show()}else{e.hide()}}});var h=$("#spullUp");f.myCScroll=new iScroll("searchser",{hScroll:false,useTransition:true,topOffset:0,onRefresh:function(){if(h.hasClass("loading")){h.removeClass("loading flip");h.find(".pullUpLabel").html("\u5411\u4e0a\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a...")}},onScrollMove:function(){if(this.y<(this.maxScrollY-30)&&!h.hasClass("flip")){h.addClass("flip");h.find(".pullUpLabel").html("\u91ca\u653e\u52a0\u8f7d\u4e0b\u4e00\u9875...")}else{if(this.y>(this.maxScrollY+30)&&h.hasClass("flip")){h.removeClass("loading flip");h.find(".pullUpLabel").html("\u5411\u4e0a\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a...")}}},onScrollEnd:function(){if(h.hasClass("flip")){h.addClass("loading");h.find(".pullUpLabel").html("Loading...")}}});f.myHScroll=new iScroll("history");f.myTScroll=new iScroll("sub-tab");f.myAScroll=new iScroll("ac_results");f.loaded=function(){f.myFScroll;f.mySScroll;f.myPScroll;f.myCScroll;f.myEScroll;f.myHScroll;f.myTScroll;f.myAScroll};document.addEventListener("touchmove",function(a){a.preventDefault()},false);document.addEventListener("DOMContentLoaded",function(){setTimeout(f.loaded,200)},false);c.myScroll=f;$("#sorter").on("click","li",function(k){var j,b=$(this).find("span").html(),a=$("#factory").find("li.light."+b);if(a.length>0&&a.html()==b){j=a.offset().top-$("#bar").height();f.myFScroll.refresh();f.myFScroll.scrollTo(0,j,200,true)}else{return false}});$("#J_GoTop").on("click",function(){var a="-"+$("#scroller").height();f.myFScroll.scrollTo(0,a,200,true)})}(window,window.lib||(window.lib={})),function(e,d,f){$("#loading").hide()}(window,window.lib||(window.lib={}));!function(E,D){var i=window.localStorage,o=E.navigator,y=o.standalone,q=o.userAgent.toLowerCase(),G=o.geolocation;var p={osplatform:"",osversion:"",language:(navigator.browserLanguage||navigator.language).toLowerCase(),ismobiledevice:"0",devicename:"",deviceid:"",devicepixelratio:window.devicePixelRatio,defaultbrowser:"",micromessager:"",useridentifier:"",latitude:0,longitude:0,screenW:window.screen.width,screenH:window.screen.height};if(i){if(i.getItem("appkey")){p.useridentifier=i.getItem("appkey")}}null!=q.match(/iphone|ipod|ipad/i)?p.osplatform="iOS":null!=q.match(/android/i)?p.osplatform="Android":null!=q.match(/linux/i)?p.osplatform="Android":null!=q.match(/adr/i)?p.osplatform="Android":null!=q.match(/windows/i)?p.osplatform="Windows":null!=q.match(/mac/i)?p.osplatform="Mac":p.osplatform="Other";var C=q.match(/(adr)\s+([\d.]+)/),B=q.match(/(android)\s+([\d.]+)/),A=q.match(/(ipad).*os\s([\d_]+)/),z=!A&&q.match(/(iphone\sos)\s([\d_]+)/),x=q.match(/(webos|hpwos)[\s\/]([\d.]+)/),w=q.match(/kindle\/([\d.]+)/),v=q.match(/silk\/([\d._]+)/),u=q.match(/(blackberry).*version\/([\d.]+)/),t=q.match(/(bb10).*version\/([\d.]+)/),s=q.match(/(rim\stablet\sos)\s([\d.]+)/);null!=q.match(/adr/i)?p.osversion=C[2]:null!=q.match(/android/i)?p.osversion=B[2]:null!=q.match(/ipad/i)?p.osversion=A[2].replace(/_/g,"."):null!=q.match(/iphone/i)?p.osversion=z[2].replace(/_/g,"."):null!=q.match(/webos|hpwos/i)?p.osversion=x[2]:null!=q.match(/kindle/i)?p.osversion=w[1]:null!=q.match(/silk/i)?p.osversion=v[1]:null!=q.match(/blackberry/i)?p.osversion=u[2]:null!=q.match(/bb10/i)?p.osversion=t[2]:null!=q.match(/rim|stablet|sos/i)?p.osversion=s[2]:p.osversion="Other";null!=q.match(/uc|ucbrowser|ucweb/i)?p.defaultbrowser="UC":null!=q.match(/baidu|baidubrowser/i)?p.defaultbrowser="Baidu":null!=q.match(/qq|mqqbrowser/i)?p.defaultbrowser="QQ":null!=q.match(/360|360browser/i)?p.defaultbrowser="360":null!=q.match(/opr|opera/i)?p.defaultbrowser="Opera":null!=q.match(/firefox\/([\d.]+)/)?p.defaultbrowser="Firefox":null!=q.match(/micromessenger/i)?p.defaultbrowser="MicroMessenger":null!=q.match(/chrome\/([\d.]+)/)?p.defaultbrowser="Chrome":null!=q.match(/safari\/([\d.]+)/)?p.defaultbrowser="Safari":p.defaultbrowser="Other";null!=q.match(/mobile/i)?p.ismobiledevice="1":"0";var F=q.match(/micromessenger\/([\d.]+)/);null!=q.match(/micromessenger/i)?p.micromessager=F[1]:"";var c={send:function(a){var b=new Date();var d={type:"POST",url:"stat.php?t="+b.getTime(),timeout:50000,dataType:"json",data:"info="+JSON.stringify(a),success:function(e){if(i){if(!i.getItem("appkey")){i.setItem("appkey",e)}}},error:function(e){}};$.ajax(d)}};var r={getGPS:function(a){if(a){p.latitude=a.coords.latitude;p.longitude=a.coords.longitude;c.send(p)}else{c.send(p)}}};if(G){G.getCurrentPosition(r.getGPS,function(a){c.send(p)},{enableHighAcuracy:true,timeout:5000,maximumAge:3000})}else{c.send(p)}}(window,window.lib||(window.lib={}),window.app||(window.app={}));
